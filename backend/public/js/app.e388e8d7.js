(function(){"use strict";var e={5300:function(e,t,a){var s=a(5130),r=a(6768);const o={id:"app"},n={class:"main-content"};function l(e,t,a,s,l,i){const d=(0,r.g2)("NotificationComponent"),c=(0,r.g2)("MainHeader"),u=(0,r.g2)("router-view"),p=(0,r.g2)("MainFooter");return(0,r.uX)(),(0,r.CE)(r.FK,null,[t[0]||(t[0]=(0,r.Lk)("div",{class:"marquee"},[(0,r.Lk)("span",null,"2024.09.01，注意！本公司不會主動通知帳務問題，若有相關疑問請洽客服！小心詐騙！")],-1)),(0,r.Lk)("div",o,[(0,r.bF)(d),(0,r.bF)(c),(0,r.Lk)("div",n,[(0,r.bF)(u)]),(0,r.bF)(p)])],64)}var i=a(4232);const d={class:"header-container"},c={class:"headerbar d-flex align-items-center"},u={key:0,class:"nav-toggle-wrapper d-flex align-items-center ms-2"},p={class:"nav-content d-flex w-100 align-items-center justify-content-between"},m=["to"],h={class:"search-container d-flex mx-lg-3"},b={class:"search-input-wrapper"},g={class:"cartmember d-flex"},k={key:0,class:"cart-item"},v={class:"text-link"};function f(e,t,a,o,n,l){const f=(0,r.g2)("BNavbarToggle"),L=(0,r.g2)("router-link"),y=(0,r.g2)("BNavbarNav"),C=(0,r.g2)("BFormInput"),w=(0,r.g2)("BButton"),_=(0,r.g2)("BCollapse"),F=(0,r.g2)("BContainer"),I=(0,r.g2)("BNavbar");return(0,r.uX)(),(0,r.CE)("div",d,[(0,r.bF)(I,{toggleable:"lg",type:"light",variant:"light",class:"navbar-overlay px-0"},{default:(0,r.k6)((()=>[(0,r.bF)(F,{fluid:""},{default:(0,r.k6)((()=>[(0,r.Lk)("div",c,[(0,r.bF)(f,{onClick:l.toggleNav},null,8,["onClick"]),n.isNavOpen?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("div",u,[(0,r.Lk)("img",{src:"img/arrowleft.png",alt:"導航提示",class:"nav-toggle-image",onClick:t[0]||(t[0]=(...e)=>l.toggleNav&&l.toggleNav(...e))}),t[4]||(t[4]=(0,r.Lk)("span",{class:"nav-toggle-text ms-1"},"請點選此處開啟導航欄",-1))]))]),(0,r.bF)(_,{id:"nav-collapse",modelValue:n.isNavOpen,"onUpdate:modelValue":t[3]||(t[3]=e=>n.isNavOpen=e),"is-nav":""},{default:(0,r.k6)((()=>[(0,r.Lk)("div",p,[(0,r.bF)(y,{class:"nav-links me-lg-3"},{default:(0,r.k6)((()=>[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.navItems,(e=>((0,r.uX)(),(0,r.CE)("div",{key:e.path,to:e.path,class:"nav-item-container"},[(0,r.bF)(L,{to:e.path,class:"nav-link-text",onClick:l.closeNav},{default:(0,r.k6)((()=>[(0,r.eW)((0,i.v_)(e.text),1)])),_:2},1032,["to","onClick"])],8,m)))),128))])),_:1}),(0,r.Lk)("div",h,[(0,r.Lk)("div",b,[(0,r.bF)(C,{type:"text",modelValue:n.searchQuery,"onUpdate:modelValue":t[1]||(t[1]=e=>n.searchQuery=e),class:"search-box",placeholder:"請輸入想找的商品搜尋",onKeyup:(0,s.jR)(l.handleSearch,["enter"])},null,8,["modelValue","onKeyup"]),(0,r.bF)(w,{class:"search-button btn btn-primary ms-2",onClick:l.handleSearch},{default:(0,r.k6)((()=>t[5]||(t[5]=[(0,r.eW)("搜尋")]))),_:1},8,["onClick"])])]),(0,r.Lk)("div",g,[(0,r.bF)(L,{class:"cart-item me-3",to:"/ShopCart",onClick:l.closeNav},{default:(0,r.k6)((()=>t[6]||(t[6]=[(0,r.Lk)("img",{src:"/img/shopping_cart.png",alt:"購物車",class:"icon-img"},null,-1),(0,r.Lk)("span",{class:"text-link"},"購物車",-1)]))),_:1},8,["onClick"]),l.isLoggedIn?((0,r.uX)(),(0,r.CE)("div",k,[(0,r.Lk)("span",v,"歡迎 "+(0,i.v_)(l.userName),1),(0,r.Lk)("button",{class:"btn btn-link",onClick:t[2]||(t[2]=(...e)=>l.logout&&l.logout(...e))},"會員登出")])):((0,r.uX)(),(0,r.Wv)(L,{key:1,class:"cart-item",to:"/UserLogin",onClick:l.closeNav},{default:(0,r.k6)((()=>t[7]||(t[7]=[(0,r.Lk)("img",{src:"/img/member_login.png",alt:"會員登入",class:"icon-img"},null,-1),(0,r.Lk)("span",{class:"text-link"},"會員登入",-1)]))),_:1},8,["onClick"]))])])])),_:1},8,["modelValue"])])),_:1})])),_:1})])}a(4114);var L={name:"MainHeader",data(){return{searchQuery:"",isNavOpen:window.innerWidth<992,navItems:[{path:"/",text:"首頁"},{path:"/MembersPage",text:"會員中心"},{path:"/ProductsList",text:"產品列表"},{path:"/AboutUsPage",text:"關於我們"},{path:"/ContactUs",text:"聯絡我們"},{path:"/admin",text:"後台"}]}},computed:{isLoggedIn(){return this.$store.state.auth.isLoggedIn},userName(){return this.$store.state.auth.user?this.$store.state.auth.user.name:""}},methods:{handleSearch(){""!==this.searchQuery.trim()&&(this.$router.push({path:"/ProductsList",query:{search:this.searchQuery.trim()}}),this.closeNav())},toggleNav(){this.isNavOpen=!this.isNavOpen},closeNav(){window.innerWidth<992&&(this.isNavOpen=!1)},checkScreenSize(){window.innerWidth>=992?this.isNavOpen=!0:this.isNavOpen=!1},handleResize(){this.checkScreenSize()},logout(){this.$store.dispatch("auth/logout"),this.$router.push({path:"/"})}},mounted(){this.checkScreenSize(),window.addEventListener("resize",this.handleResize)},beforeUnmount(){window.removeEventListener("resize",this.handleResize)},watch:{$route(){this.closeNav()}}},y=a(1241);const C=(0,y.A)(L,[["render",f],["__scopeId","data-v-67589a17"]]);var w=C;const _={class:"footer d-flex flex-column"};function F(e,t,a,s,o,n){return(0,r.uX)(),(0,r.CE)("div",_,t[0]||(t[0]=[(0,r.Lk)("div",{class:"flex-grow-1"},[(0,r.Lk)("p",null,[(0,r.eW)("台灣ECshop.com有限公司"),(0,r.Lk)("br"),(0,r.eW)(" 統編 99999999"),(0,r.Lk)("br"),(0,r.eW)(" Copyright 2024, ECSHOP Group.")])],-1)]))}var I={name:"MainFooter"};const P=(0,y.A)(I,[["render",F],["__scopeId","data-v-499e5536"]]);var E=P;const S={class:"notifications-container"},O=["onClick"],x={class:"message"},A=["onClick"];function U(e,t,a,o,n,l){return(0,r.uX)(),(0,r.CE)("div",S,[(0,r.bF)(s.F,{name:"notification"},{default:(0,r.k6)((()=>[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(o.notifications,(e=>((0,r.uX)(),(0,r.CE)("div",{key:e.id,class:(0,i.C4)(["notification",`notification-${e.type}`]),onClick:t=>o.closeNotification(e.id)},[(0,r.Lk)("span",x,(0,i.v_)(e.message),1),(0,r.Lk)("button",{class:"close-btn",onClick:(0,s.D$)((t=>o.closeNotification(e.id)),["stop"])},"×",8,A)],10,O)))),128))])),_:1})])}var T=a(782),M={name:"NotificationComponent",setup(){const e=(0,T.Pj)(),t=(0,r.EW)((()=>e.state.notifications.notifications)),a=t=>{e.dispatch("notifications/removeNotification",t)};return{notifications:t,closeNotification:a}}};const R=(0,y.A)(M,[["render",U],["__scopeId","data-v-c8dde580"]]);var D=R,X={name:"App",components:{MainHeader:w,MainFooter:E,NotificationComponent:D},setup(){const e=(0,T.Pj)(),t=(0,r.EW)((()=>e.getters["auth/isLoggedIn"]));return{isLoggedIn:t}}};const N=(0,y.A)(X,[["render",l],["__scopeId","data-v-2873ea48"]]);var $=N,q=a(4857),V=(a(4188),a(323),a(8077)),K=a(8047),W=a(1387);const B={class:"homepage container mt-5"},Q={class:"carousel-section"},j={key:0,id:"mainCarousel",class:"carousel slide"},J={key:1,class:"alert alert-warning"},z={key:2,id:"carouselExampleIndicators",class:"carousel slide position-relative","data-bs-ride":"carousel"},H={class:"carousel-indicators"},G=["data-bs-slide-to","aria-current","aria-labe"],Z={class:"carousel-inner"},Y=["src","alt"],ee={key:0,class:"sales-ranking mt-5"},te={class:"product-list"},ae=["src"],se={key:0},re={key:1,class:"sales-ranking mt-5"},oe={class:"product-list"},ne=["src"],le={key:2,class:"sales-ranking mt-5"},ie={class:"product-list"},de=["src"],ce={key:3,class:"countdown-special-offers mt-4"},ue={class:"product-list"},pe=["src"],me={class:"countdown-timer"};function he(e,t,a,s,o,n){return(0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.Lk)("div",B,[(0,r.Lk)("div",Q,[o.isLoading.carousel&&o.carouselImages.length?((0,r.uX)(),(0,r.CE)("div",j,t[0]||(t[0]=[(0,r.Lk)("div",{class:"spinner-border",role:"status"},[(0,r.Lk)("span",{class:"visually-hidden"},"加載中...")],-1)]))):o.errors.carousel?((0,r.uX)(),(0,r.CE)("div",J,(0,i.v_)(o.errors.carousel),1)):o.carouselImages&&o.carouselImages.length?((0,r.uX)(),(0,r.CE)("div",z,[(0,r.Lk)("div",H,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(o.carouselImages,((e,t)=>((0,r.uX)(),(0,r.CE)("button",{key:"indicator-"+t,type:"button","data-bs-target":"#carouselExampleIndicators","data-bs-slide-to":t,class:(0,i.C4)({active:0===t}),"aria-current":0===t,"aria-labe":"Slide"+(t+1)},null,10,G)))),128))]),(0,r.Lk)("div",Z,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(o.carouselImages,((e,t)=>((0,r.uX)(),(0,r.CE)("div",{key:t,class:(0,i.C4)(["carousel-item",{active:0===t}])},[(0,r.Lk)("img",{src:n.getImageUrl(e.url),class:"d-block w-100",alt:"圖片"+(t+1)},null,8,Y)],2)))),128))]),t[1]||(t[1]=(0,r.Fv)('<button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="prev" data-v-74a0d0b6><span class="carousel-control-prev-icon" aria-hidden="true" data-v-74a0d0b6></span><span class="visually-hidden" data-v-74a0d0b6>Previous</span></button><button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="next" data-v-74a0d0b6><span class="carousel-control-next-icon" aria-hidden="true" data-v-74a0d0b6></span><span class="visually-hidden" data-v-74a0d0b6>Next</span></button>',2))])):(0,r.Q3)("",!0)])]),o.randomProducts&&o.randomProducts.length>0?((0,r.uX)(),(0,r.CE)("div",ee,[t[2]||(t[2]=(0,r.Lk)("h3",null,"為您推薦",-1)),(0,r.Lk)("div",te,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(o.randomProducts,((e,t)=>((0,r.uX)(),(0,r.CE)("div",{key:t,class:"product-item"},[(0,r.Lk)("img",{src:n.getProductImage(e.product_id),class:"product-thumbnail"},null,8,ae),(0,r.Lk)("div",null,(0,i.v_)(t+1)+"."+(0,i.v_)(e.name),1),"-"===e.quantity_sold?((0,r.uX)(),(0,r.CE)("div",se,"熱門推薦")):(0,r.Q3)("",!0)])))),128))])])):(0,r.Q3)("",!0),o.sevenDaySalesRanking&&o.sevenDaySalesRanking.length>0?((0,r.uX)(),(0,r.CE)("div",re,[t[3]||(t[3]=(0,r.Lk)("h3",null,"過去7日銷售排行",-1)),(0,r.Lk)("div",oe,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(o.sevenDaySalesRanking,((e,t)=>((0,r.uX)(),(0,r.CE)("div",{key:t,class:"product-item"},[(0,r.Lk)("img",{src:n.getProductImage(e.product_id),class:"product-thumbnail"},null,8,ne),(0,r.Lk)("div",null,(0,i.v_)(t+1)+"."+(0,i.v_)(e.name),1),(0,r.Lk)("div",null,"賣出 "+(0,i.v_)(e.quantity_sold)+"件",1)])))),128))])])):(0,r.Q3)("",!0),o.monthSalesRanking&&o.monthSalesRanking.length>0?((0,r.uX)(),(0,r.CE)("div",le,[t[4]||(t[4]=(0,r.Lk)("h3",null,"過去30日銷售排行",-1)),(0,r.Lk)("div",ie,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(o.monthSalesRanking,((e,t)=>((0,r.uX)(),(0,r.CE)("div",{key:t,class:"product-item"},[(0,r.Lk)("img",{src:n.getProductImage(e.product_id),class:"product-thumbnail"},null,8,de),(0,r.Lk)("div",null,(0,i.v_)(t+1)+"."+(0,i.v_)(e.name),1),(0,r.Lk)("div",null,"賣出"+(0,i.v_)(e.quantity_sold)+"件",1)])))),128))])])):(0,r.Q3)("",!0),n.processedSpecialOffers.length>0?((0,r.uX)(),(0,r.CE)("div",ce,[t[5]||(t[5]=(0,r.Lk)("h3",null,"特價倒數計時商品",-1)),(0,r.Lk)("div",ue,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.processedSpecialOffers,((e,t)=>((0,r.uX)(),(0,r.CE)("div",{key:t,class:"product-item"},[(0,r.Lk)("img",{src:n.getProductImage(e.product_id),class:"product-thumbnail"},null,8,pe),(0,r.Lk)("div",null,(0,i.v_)(e.name),1),(0,r.Lk)("div",null,"特價 "+(0,i.v_)(e.price)+"元",1),(0,r.Lk)("div",me," 倒數"+(0,i.v_)(n.formatTime(e.countdown)),1)])))),128))])])):(0,r.Q3)("",!0)],64)}var be=a(586);const ge={carouselImages:[{url:"/static/img/welcome.jpg"},{url:"/static/img/welcome.jpg"}]};var ke={name:"HomePage",beforeUnmount(){this.clearCountdownIntervals()},data(){return{isPageLoading:!0,sevenDaySalesRanking:[],monthSalesRanking:[],specialOffers:[],carouselImages:ge.carouselImages,products:[],countdownIntervals:[],isLoading:{sales:!1,offers:!1,carousel:!1,products:!1},errors:{sales:null,offers:null,carousel:null,products:null},randomProducts:[]}},async mounted(){try{await this.loadHomePageData(),this.randomProducts=this.getRandomProducts(),this.$nextTick((()=>{this.startCountdown();const e=document.getElementById("carouselExampleIndicators");e&&new V.FN(e,{interval:5e3,ride:!0})}))}catch(e){console.error("Failed to load home page data",e)}},methods:{handleError(e,t){console.error(`Error in ${e}:`,t),this.errors[e]=`無法加載${e}數據`},async loadHomePageData(){Object.keys(this.errors).forEach((e=>{this.errors[e]=null})),await this.loadProductsData(),await Promise.all([this.loadSalesData(),this.loadOffersData(),this.loadCarouselData()])},async loadSalesData(){this.isLoading.sales=!0;try{const[e,t]=await Promise.all([be.A.get("/api/sales/ranking",{params:{days:7}}),be.A.get("/api/sales/ranking",{params:{days:30}})]),a=e.data||[],s=t.data||[];this.sevenDaySalesRanking=this.processSalesRanking(a),console.log("Processed Seven Day Sales Ranking:",this.sevenDaySalesRanking),this.monthSalesRanking=this.processSalesRanking(s),console.log("Processed Month Sales Ranking:",this.monthSalesRanking)}catch(e){console.error("加載銷售數據失敗",e),this.errors.sales="無法加載銷售排行數據",this.sevenDaySalesRanking=[],this.monthSalesRanking=[]}finally{this.isLoading.sales=!1}},processSalesRanking(e){return e.map((e=>{const t=Number(e.product_id),a=this.products.find((e=>e.id===t));return{product_id:t,name:a?a.name:`Product ID: ${t}`,quantity_sold:e.quantity_sold,image:a&&a.image?`api${a.image}`:"/img/default-product.jpg"}})).slice(0,10)},async loadOffersData(){this.isLoading.offers=!0;try{const e=await be.A.get("/api/special-offers");this.specialOffers=e.data||[]}catch(e){console.error("加載特價商品失敗",e),this.errors.offers="無法加載特價商品數據",this.specialOffers=[]}finally{this.isLoading.offers=!1}},async loadCarouselData(){this.isLoading.carousel=!0;try{const e=await be.A.get("/api/carousel_images");this.carouselImages=e.data||[],console.log("Loaded carousel images:",this.carouselImages)}catch(e){console.error("加載輪播圖片失敗",e),this.errors.carousel="無法加載輪播圖片",this.carouselImages=ge.carouselImages}finally{this.isLoading.carousel=!1}},async loadProductsData(){this.isLoading.products=!0;try{const e=await be.A.get("/api/products");this.products=e.data||[]}catch(e){console.error("加載商品數據失敗",e),this.errors.products="無法加載商品列表",this.products=[]}finally{this.isLoading.products=!1}},convertToSortedRankingWithProducts(e){return Object.entries(e).map((([e,t])=>{const a=Number(e),s=this.products.find((e=>e.id===a));return{product_id:e,quantity_sold:t,name:s?s.name:"未知商品",image:s?s.image:"/img/default-product.jpg"}})).sort(((e,t)=>t.quantity_sold-e.quantity_sold)).slice(0,5)},startCountdown(){this.clearCountdownIntervals(),this.specialOffers&&0!==this.specialOffers.length&&this.specialOffers.forEach(((e,t)=>{if(!e.countdown)return;const a=setInterval((()=>{this.specialOffers[t].countdown&&this.specialOffers[t].countdown>0?this.specialOffers[t].countdown--:clearInterval(a)}),1e3);this.countdownIntervals.push(a)}))},clearCountdownIntervals(){this.countdownIntervals.forEach((e=>clearInterval(e))),this.countdownIntervals=[]},formatTime(e){const t=Math.floor(e/3600),a=Math.floor(e%3600/60),s=e%60;return`${t}時${a}分${s}秒`},getImageUrl(e){return`api${e}`},getProductImage(e){const t=Number(e),a=this.products.find((e=>e.id===t));return a&&a.image?`api${a.image}`:"/img/default-product.jpg"},getRandomProducts(e=5){if(!this.products||0===this.products.length)return[];const t=[...this.products].sort((()=>.5-Math.random()));return t.slice(0,e).map((e=>({product_id:e.id,name:e.name,image:this.getProductImage(e.id),quantity_sold:"-"})))}},computed:{processedSpecialOffers(){return this.specialOffers&&this.products?this.specialOffers.map((e=>{const t=this.products.find((t=>t.id===e.product_id));return{...e,name:t?t.name:"未知商品"}})):[]}}};const ve=(0,y.A)(ke,[["render",he],["__scopeId","data-v-74a0d0b6"]]);var fe=ve;function Le(e,t,a,s,o,n){return t[0]||(t[0]=(0,r.Fv)('<h1 style="color:coral;" data-v-b5050256>關於我們</h1><br data-v-b5050256><br data-v-b5050256><div data-v-b5050256><div class="title" data-v-b5050256>公司願景</div><div class="content" data-v-b5050256> ECSHOP 電商平台致力於打造一個以消費者需求為核心的全球購物平台，通過先進的技術、優質的產品及卓越的服務，提供每一位顧客最便捷、愉快的購物體驗。 我們相信，透過創新和精確的市場洞察，能為消費者和合作夥伴創造更多的價值，並推動電商產業的進步。 我們的願景是成為全球消費者心目中的首選購物平台，無論是日常所需還是高端商品，ECSHOP 都能夠滿足不同客戶的需求，並且實現跨境無縫銷售的全球電商體驗。 </div><div class="title" data-v-b5050256>未來展望</div><div class="content" data-v-b5050256> ECSHOP 將持續不斷地創造優質的產品和優秀的服務，並持續推動消費者需求的解決方案，讓消費者能更輕鬆地在全球購物。 我們也將不斷地學習和進步，以提供給消&quot;&gt;未來，ECSHOP 將持續拓展產品品類，並加強與世界各地的品牌商及供應商的合作，為消費者提供更豐富的選擇。同時，我們將致力於智能化技術的應用，利用大數據分析、人工智慧和物聯網等前沿技術，提升用戶體驗，優化物流配送效率，並實現個性化推薦和精準行銷。 我們也將積極推動環保和可持續發展，通過綠色物流、減少包裝浪費等措施，承擔企業社會責任，為地球的未來做出貢獻。 展望未來，ECSHOP 將不斷創新，推動整個行業的數位化轉型，並且努力實現「消費者、合作夥伴與企業共贏」的目標。我們期待與您攜手，共創電商新時代的輝煌！</div></div>',4))}var ye={name:"AboutUsPage"};const Ce=(0,y.A)(ye,[["render",Le],["__scopeId","data-v-b5050256"]]);var we=Ce;const _e={class:"cart-container container mt-5"},Fe={key:0,class:"text-center"},Ie={class:"table table-hover"},Pe=["src"],Ee=["onUpdate:modelValue","onInput"],Se=["onClick"],Oe={class:"d-flex justify-content-between align-items-center mt-4"};function xe(e,t,a,o,n,l){const d=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",_e,[t[5]||(t[5]=(0,r.Lk)("h2",{class:"text-center mb-4"},"我的購物車",-1)),0===o.cartItems.length?((0,r.uX)(),(0,r.CE)("div",Fe,[t[3]||(t[3]=(0,r.Lk)("p",null,"購物車是空的。",-1)),(0,r.bF)(d,{to:"/",class:"btn btn-primary"},{default:(0,r.k6)((()=>t[2]||(t[2]=[(0,r.eW)("去購物")]))),_:1})])):((0,r.uX)(),(0,r.CE)(r.FK,{key:1},[(0,r.Lk)("table",Ie,[t[4]||(t[4]=(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",{scope:"col"},"商品圖片"),(0,r.Lk)("th",{scope:"col"},"商品名稱"),(0,r.Lk)("th",{scope:"col"},"單價"),(0,r.Lk)("th",{scope:"col"},"數量"),(0,r.Lk)("th",{scope:"col"},"小計"),(0,r.Lk)("th",{scope:"col"},"操作")])],-1)),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(o.cartItems,((e,a)=>((0,r.uX)(),(0,r.CE)("tr",{key:e.id},[(0,r.Lk)("td",null,[(0,r.Lk)("img",{src:e.image,alt:"item.name",class:"product-image",onError:t[0]||(t[0]=(...e)=>o.imageError&&o.imageError(...e))},null,40,Pe)]),(0,r.Lk)("td",null,(0,i.v_)(e.name),1),(0,r.Lk)("td",null,(0,i.v_)(e.price)+"元",1),(0,r.Lk)("td",null,[(0,r.bo)((0,r.Lk)("input",{type:"number",class:"form-control quantity-input","onUpdate:modelValue":t=>e.quantity=t,onInput:t=>o.updateQuantity(a,e.quantity),min:"1"},null,40,Ee),[[s.Jo,e.quantity,void 0,{number:!0}]])]),(0,r.Lk)("td",null,(0,i.v_)(e.quantity*e.price)+"元",1),(0,r.Lk)("td",null,[(0,r.Lk)("button",{class:"btn btn-danger",onClick:e=>o.removeItem(a)},"刪除",8,Se)])])))),128))])]),(0,r.Lk)("div",Oe,[(0,r.Lk)("h4",null,"總計："+(0,i.v_)(o.cartTotal)+"元",1),(0,r.Lk)("button",{class:"btn btn-success",onClick:t[1]||(t[1]=(...e)=>o.checkout&&o.checkout(...e))},"結帳")])],64))])}var Ae={name:"ShopCart",setup(){const e=(0,T.Pj)(),t=(0,W.rd)(),a=(0,r.EW)((()=>e.state.cart.items)),s=(0,r.EW)((()=>e.getters["cart/cartTotal"])),o=(0,r.EW)((()=>e.state.auth&&e.state.auth.isLoggedIn)),n=(t,a)=>{a<1&&(a=1),e.dispatch("cart/updateItemQuantity",{index:t,quantity:a})},l=e=>{e.target.src="/img/wrong.png"},i=t=>{e.dispatch("cart/removeItemFromCart",t)},d=async()=>{if(o.value)if(0!==a.value.length)try{const r={user_id:e.state.auth.user.id,items:a.value.map((e=>({product_id:e.id,quantity:e.quantity,price:e.price}))),total:s.value};console.log("送出的訂單數據:",r);const o=await be.A.post("/api/orders",r);o.data&&o.data.orderId&&(e.dispatch("cart/clearShoppingCart"),e.dispatch("notifications/showNotification",{type:"success",message:"訂單已成功提交！",timeout:2e3}),t.push({name:"OrderConfirmation",params:{orderId:o.data.orderId}}))}catch(r){console.error("提交訂單時出錯",r),e.dispatch("notifications/showNotification",{type:"error",message:"提交訂單失敗，請稍後再試！"})}else e.dispatch("notifications/showNotification",{type:"warning",message:"購物車是空的，無法結帳！",timeout:2e3});else t.push({name:"UserLogin",query:{redirect:"/cart"}})};return{cartItems:a,cartTotal:s,updateQuantity:n,removeItem:i,checkout:d,imageError:l}}};const Ue=(0,y.A)(Ae,[["render",xe],["__scopeId","data-v-d8651dc0"]]);var Te=Ue;const Me={class:"container mt-5"},Re={key:0},De={class:"row"},Xe={class:"tag-filter mb-4"},Ne=["onClick"],$e={class:"search-bar mb-4"},qe={class:"col-md-3"},Ve=["max"],Ke={class:"container mt-5"},We={class:"row"};function Be(e,t,a,o,n,l){const d=(0,r.g2)("ProductCard");return(0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.Lk)("div",Me,[t[6]||(t[6]=(0,r.Lk)("h2",{class:"mb-4"},"商品列表",-1)),0===o.filteredProducts.length?((0,r.uX)(),(0,r.CE)("div",Re,t[2]||(t[2]=[(0,r.Lk)("p",null,"暫無符合條件的商品，請修改查詢條件！",-1)]))):(0,r.Q3)("",!0),(0,r.Lk)("div",De,[(0,r.Lk)("div",Xe,[t[3]||(t[3]=(0,r.Lk)("h4",null,"選擇標籤",-1)),(0,r.Lk)("div",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(o.availableTags,(e=>((0,r.uX)(),(0,r.CE)("button",{key:e,onClick:t=>o.toggleTag(e),class:(0,i.C4)([{btn:!0,"btn-primary":o.selectedTags.includes(e),"btn-outline-primary":!o.selectedTags.includes(e)},"me-2 mb-2"])},(0,i.v_)(e),11,Ne)))),128))])]),(0,r.Lk)("div",$e,[(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>o.searchQuery=e),class:"form-control",placeholder:"搜尋產品..."},null,512),[[s.Jo,o.searchQuery]])]),(0,r.Lk)("div",qe,[t[5]||(t[5]=(0,r.Lk)("h4",null,"篩選條件",-1)),(0,r.Lk)("div",null,[t[4]||(t[4]=(0,r.Lk)("label",null,"價格區間",-1)),(0,r.bo)((0,r.Lk)("input",{type:"range","onUpdate:modelValue":t[1]||(t[1]=e=>o.priceRange=e),min:"0",max:o.maxPrice,step:"500"},null,8,Ve),[[s.Jo,o.priceRange]]),(0,r.Lk)("p",null,"價格："+(0,i.v_)(o.priceRange)+"元",1)])])])]),(0,r.Lk)("div",Ke,[(0,r.Lk)("div",We,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(o.filteredProducts,(e=>((0,r.uX)(),(0,r.CE)("div",{class:"col-md-3 mb-4",key:e.id},[(0,r.bF)(d,{product:e,onAddToCart:o.addToCart},null,8,["product","onAddToCart"])])))),128))])])],64)}a(7642),a(8004),a(3853),a(5876),a(2475),a(5024),a(1698);var Qe=a(144);const je={class:"product-card"},Je=["src"],ze={class:"card-title"},He={class:"card-text"},Ge=["disabled"];function Ze(e,t,a,s,o,n){const l=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",je,[(0,r.bF)(l,{to:{name:"ProductDetail",params:{id:s.productId}}},{default:(0,r.k6)((()=>[(0,r.Lk)("img",{src:s.productImageUrl,class:"product-image",alt:"Product Image",onError:t[0]||(t[0]=(...e)=>s.imageError&&s.imageError(...e))},null,40,Je),(0,r.Lk)("h5",ze,(0,i.v_)(a.product.name),1),(0,r.Lk)("p",He,(0,i.v_)(parseInt(a.product.price))+" 元",1)])),_:1},8,["to"]),(0,r.Lk)("button",{class:"btn btn-primary",onClick:t[1]||(t[1]=(...e)=>s.handleAddToCart&&s.handleAddToCart(...e)),disabled:s.isAdding},(0,i.v_)(s.isAdding?"添加中...":"加入購物車"),9,Ge)])}var Ye={name:"ProductCard",props:{product:{type:Object,required:!0,validator:function(e){return e.id&&e.name&&e.price}}},setup(e,{emit:t}){const a=(0,Qe.KR)(!1),s=(0,r.EW)((()=>String(e.product.id).trim())),o=(0,r.EW)((()=>`/api/${e.product.image}`)),n=(0,r.EW)((()=>{const t=parseInt(e.product.price);return isNaN(t)?0:t})),l=()=>{a.value||(a.value=!0,t("add-to-cart",e.product),setTimeout((()=>{a.value=!1}),1e3))},i=e=>{e.target.src="/img/wrong.png"};return{isAdding:a,productId:s,productImageUrl:o,formattedPrice:n,handleAddToCart:l,imageError:i}}};const et=(0,y.A)(Ye,[["render",Ze],["__scopeId","data-v-6e791171"]]);var tt=et,at={name:"ProductsList",components:{ProductCard:tt},setup(){const e=(0,Qe.KR)([]),t=(0,Qe.KR)(!1),a=(0,Qe.KR)(null),s=(0,r.EW)((()=>{const t=e.value.map((e=>Number(e.price)));return t.length?Math.max(...t):1e6})),o=(0,Qe.KR)(s.value),n=(0,Qe.KR)([]),l=(0,Qe.KR)([]),i=(0,T.Pj)(),d=(0,W.rd)(),c=(0,W.lq)(),u=(0,r.EW)((()=>i.state.auth.isLoggedIn)),p=(0,Qe.KR)(""),m=(0,r.EW)((()=>e.value.filter((e=>{const t=Number(e.price),a=e.name.toLowerCase().includes(p.value.toLowerCase()),s=t<=o.value,r=e.tags||[],n=0===l.value.length||l.value.some((e=>r.includes(e)));return a&&s&&n})))),h=async()=>{t.value=!0,a.value=null;try{const t=await be.A.get("/api/products");console.log("商品數據:",t.data),e.value=t.data.map((e=>({...e,id:String(e.id).trim()}))),console.log("處理後的商品數據:",e.value),o.value=s.value;const a=new Set;e.value.forEach((e=>{e.tags&&Array.isArray(e.tags)&&e.tags.forEach((e=>a.add(e)))})),n.value=Array.from(a)}catch(r){console.error("加載商品時出錯",r),a.value="加載產品時出錯，請稍後再試！"}finally{t.value=!1}},b=e=>{l.value.includes(e)?l.value=l.value.filter((t=>t!==e)):l.value.push(e)},g=e=>{if(u.value)i.dispatch("cart/addProductToCart",e),i.dispatch("notifications/showNotification",{type:"success",message:`已將 ${e.name} 加入購物車`,timeout:2e3});else{i.dispatch("notifications/showNotification",{type:"warning",message:"請先登入會員再加入購物車！",timeout:2e3});const e=c.fullPath;d.push({name:"UserLogin",query:{redirect:e}})}};return(0,r.sV)((()=>{p.value=c.query.search||"",h().then((()=>{console.log("加載後的商品列表：",e.value)}))})),(0,r.wB)((()=>c.query.search),(e=>{p.value=e||""})),{products:e,maxPrice:s,priceRange:o,loading:t,error:a,isLoggedIn:u,filteredProducts:m,availableTags:n,selectedTags:l,searchQuery:p,toggleTag:b,addToCart:g}}};const st=(0,y.A)(at,[["render",Be],["__scopeId","data-v-897747cc"]]);var rt=st;const ot={class:"container mt-5"},nt={key:0,class:"product-detail"},lt={class:"row"},it={class:"col-md-6"},dt={class:"image-container"},ct=["src"],ut={class:"col-md-6"},pt={class:"product-name"},mt={class:"product-description"},ht={class:"product-price"},bt={class:"d-flex mt-4"},gt={key:1,class:"loading"};function kt(e,t,a,s,o,n){return(0,r.uX)(),(0,r.CE)("div",ot,[s.product&&s.product.id?((0,r.uX)(),(0,r.CE)("div",nt,[(0,r.Lk)("div",lt,[(0,r.Lk)("div",it,[(0,r.Lk)("div",dt,[(0,r.Lk)("img",{src:s.productImageUrl,alt:"Product Image",class:"product-image"},null,8,ct)])]),(0,r.Lk)("div",ut,[(0,r.Lk)("h2",pt,(0,i.v_)(s.product.name),1),(0,r.Lk)("p",mt,(0,i.v_)(s.product.description),1),(0,r.Lk)("h4",ht,"價格："+(0,i.v_)(s.product.price)+" 元",1),(0,r.Lk)("div",bt,[(0,r.Lk)("button",{class:"btn btn-primary",onClick:t[0]||(t[0]=(...e)=>s.addToCart&&s.addToCart(...e))},"加入購物車"),(0,r.Lk)("button",{class:"btn btn-secondary ms-2",onClick:t[1]||(t[1]=(...e)=>s.goBack&&s.goBack(...e))},"返回上一頁")])])])])):((0,r.uX)(),(0,r.CE)("div",gt,t[2]||(t[2]=[(0,r.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,r.Lk)("span",{class:"visually-hidden"},"正在加載...")],-1),(0,r.Lk)("p",null,"正在加載商品中...",-1)])))])}var vt={name:"ProductDetail",setup(){const e=(0,T.Pj)(),t=(0,W.lq)(),a=(0,W.rd)(),s=(0,Qe.KR)(null),o=(0,r.EW)((()=>t.params.id)),n=(0,r.EW)((()=>s.value?`/api/${s.value.image}`:"/img/wrong.png")),l=(0,r.EW)((()=>e.state.auth.isLoggedIn)),i=async()=>{try{const e=await be.A.get(`/api/products/${o.value}`);s.value=e.data}catch(t){console.error("加載商品詳情時出錯",t),e.dispatch("notifications/showNotification",{type:"error",message:"加載商品詳情時出錯，請稍後再試！"})}},d=()=>{if(l.value)e.dispatch("cart/addProductToCart",s.value),e.dispatch("notifications/showNotification",{type:"success",message:`已將${s.value.name}加入購物車`,timeout:2e3});else{e.dispatch("notifications/showNotification",{type:"warning",message:"請先登入在加入購物車！"});const s=t.fullPath;a.push({name:"UserLogin",query:{redirect:s}})}},c=()=>{a.go(-1)};return(0,r.sV)((()=>{i()})),{addToCart:d,goBack:c,product:s,productId:o,productImageUrl:n}}};const ft=(0,y.A)(vt,[["render",kt],["__scopeId","data-v-23de44bc"]]);var Lt=ft;const yt={class:"container mt-5"},Ct={class:"card mb-3"},wt={class:"card-body"},_t={class:"card-text"},Ft={class:"card-text"},It={class:"card-text"},Pt={class:"card-text"},Et={class:"card mb-3"},St={class:"card-body"},Ot={key:0},xt={class:"table"},At=["onClick"],Ut=["onClick"],Tt={class:"mb-3"},Mt={class:"card-body"},Rt={class:"table"},Dt=["onClick"],Xt={key:0},Nt={colspan:"4"},$t={class:"order-details"},qt=["src","alt"],Vt={class:"item-info"},Kt={class:"text-end"},Wt={class:"modal fade",id:"recipientModal",ref:"recipientModal",tabindex:"-1","aria-labelledby":"recipientModalLabel","aria-hidden":"true"},Bt={class:"modal-dialog"},Qt={class:"modal-content"},jt={class:"modal-header"},Jt={class:"modal-title",id:"recipientModalLabel"},zt={class:"modal-body"},Ht={class:"mb-3"},Gt={class:"mb-3"},Zt={class:"mb-3"},Yt={class:"modal-footer"};function ea(e,t,a,o,n,l){return(0,r.uX)(),(0,r.CE)("div",yt,[t[20]||(t[20]=(0,r.Lk)("h2",{class:"mb-4"},"會員資料",-1)),(0,r.Lk)("div",Ct,[(0,r.Lk)("div",wt,[t[7]||(t[7]=(0,r.Lk)("h5",{class:"card-title"},"會員基本資料",-1)),(0,r.Lk)("p",_t,"使用者名稱："+(0,i.v_)(n.userInfo.name),1),(0,r.Lk)("p",Ft,"電子郵件："+(0,i.v_)(n.userInfo.email),1),(0,r.Lk)("p",It,"電話："+(0,i.v_)(n.userInfo.phone),1),(0,r.Lk)("p",Pt,"住址: "+(0,i.v_)(n.userInfo.address),1)])]),(0,r.Lk)("div",Et,[(0,r.Lk)("div",St,[t[9]||(t[9]=(0,r.Lk)("h5",null,"收件人資料",-1)),(0,r.Lk)("button",{class:"btn btn-link",onClick:t[0]||(t[0]=(...e)=>l.toggleRecipient&&l.toggleRecipient(...e))},"展開/收起"),n.showRecipient?((0,r.uX)(),(0,r.CE)("div",Ot,[(0,r.Lk)("table",xt,[t[8]||(t[8]=(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",null,"收件人名稱"),(0,r.Lk)("th",null,"聯絡電話"),(0,r.Lk)("th",null,"地址")])],-1)),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.recipients,((e,t)=>((0,r.uX)(),(0,r.CE)("tr",{key:t},[(0,r.Lk)("td",null,(0,i.v_)(e.name),1),(0,r.Lk)("td",null,(0,i.v_)(e.phone),1),(0,r.Lk)("td",null,(0,i.v_)(e.address),1),(0,r.Lk)("td",null,[(0,r.Lk)("button",{class:"btn btn-primary btn-sm",onClick:e=>l.editRecipientInfo(t)},"編輯",8,At),(0,r.Lk)("button",{class:"btn btn-danger btn-sm",onClick:e=>l.deleteRecipient(t)},"刪除",8,Ut)])])))),128))])]),(0,r.Lk)("button",{class:"btn btn-primary",onClick:t[1]||(t[1]=(...e)=>l.addRecipient&&l.addRecipient(...e))},"新增收件人")])):(0,r.Q3)("",!0)]),(0,r.Lk)("div",Tt,[(0,r.Lk)("div",Mt,[t[14]||(t[14]=(0,r.Lk)("h5",{class:"card-title"},"訂單查詢",-1)),(0,r.Lk)("table",Rt,[t[13]||(t[13]=(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",null,"訂單編號"),(0,r.Lk)("th",null,"訂單金額"),(0,r.Lk)("th",null,"訂購時間"),(0,r.Lk)("th",null,"操作")])],-1)),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.orders,((e,a)=>((0,r.uX)(),(0,r.CE)(r.FK,{key:a},[(0,r.Lk)("tr",null,[(0,r.Lk)("td",null,(0,i.v_)(e.id),1),(0,r.Lk)("td",null,(0,i.v_)(Math.round(e.total)),1),(0,r.Lk)("td",null,(0,i.v_)(l.formateOrderDate(e.created_at)),1),(0,r.Lk)("td",null,[(0,r.Lk)("button",{class:"btn btn-link",onClick:e=>l.toggleOrderDetails(a)},"展開/收起",8,Dt)])]),null!==n.expandedOrder&&n.expandedOrder===a?((0,r.uX)(),(0,r.CE)("tr",Xt,[(0,r.Lk)("td",Nt,[(0,r.Lk)("div",$t,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.items,((e,a)=>((0,r.uX)(),(0,r.CE)("div",{key:a,class:"order-item"},[(0,r.Lk)("img",{src:e.product_image||"/default-product-image.png",alt:e.product_name,class:"product-thumbnail"},null,8,qt),(0,r.Lk)("div",Vt,[t[10]||(t[10]=(0,r.Lk)("strong",null,"商品名稱:",-1)),(0,r.eW)((0,i.v_)(e.name)+" ",1),t[11]||(t[11]=(0,r.Lk)("strong",null,"數量:",-1)),(0,r.eW)(" "+(0,i.v_)(e.quantity)+" ",1),t[12]||(t[12]=(0,r.Lk)("strong",null,"價格:",-1)),(0,r.eW)(" "+(0,i.v_)(e.price),1)])])))),128))])])])):(0,r.Q3)("",!0)],64)))),128))])])])]),(0,r.Lk)("div",Kt,[(0,r.Lk)("button",{class:"btn btn-danger",onClick:t[2]||(t[2]=(...e)=>l.handleLogout&&l.handleLogout(...e))},"登出")])]),(0,r.Lk)("div",Wt,[(0,r.Lk)("div",Bt,[(0,r.Lk)("div",Qt,[(0,r.Lk)("div",jt,[(0,r.Lk)("h5",Jt,(0,i.v_)(n.isEditing?"編輯收件人":"新增收件人"),1),t[15]||(t[15]=(0,r.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),(0,r.Lk)("div",zt,[(0,r.Lk)("div",Ht,[t[16]||(t[16]=(0,r.Lk)("label",{for:"recipientName",class:"form-label"},"收件人名稱",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[3]||(t[3]=e=>n.editRecipient.name=e)},null,512),[[s.Jo,n.editRecipient.name]])]),(0,r.Lk)("div",Gt,[t[17]||(t[17]=(0,r.Lk)("label",{for:"recipientPhone",class:"form-label"},"收件人電話",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[4]||(t[4]=e=>n.editRecipient.phone=e)},null,512),[[s.Jo,n.editRecipient.phone]])]),(0,r.Lk)("div",Zt,[t[18]||(t[18]=(0,r.Lk)("label",{for:"recipientAddress",class:"form-label"},"收件人地址",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[5]||(t[5]=e=>n.editRecipient.address=e)},null,512),[[s.Jo,n.editRecipient.address]])])]),(0,r.Lk)("div",Yt,[t[19]||(t[19]=(0,r.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"取消",-1)),(0,r.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[6]||(t[6]=(...e)=>l.saveRecipient&&l.saveRecipient(...e))},(0,i.v_)(n.isEditing?"儲存變更":"新增"),1)])])])],512)])}var ta={name:"MemberPage",data(){return{showRecipient:!1,expandedOrder:null,isEditing:!1,recipients:[],editRecipient:{name:" ",phone:" ",address:" "},editingIndex:-1,userInfo:{name:" ",email:" ",phone:"",address:""},orders:[]}},computed:{...(0,T.aH)("auth",{isLoggedIn:e=>e.isLoggedIn,user:e=>e.user})},mounted(){if(!this.isLoggedIn)return alert("請先登入會員！"),void this.$router.push("/UserLogin");this.loadUserInfo(),this.loadOrders(),this.loadRecipients()},methods:{async loadUserInfo(){try{const e=this.user.id;if(console.log("用戶 ID:",e),!e)return void console.error("用戶ID無效");const t=await be.A.get(`/api/users/${e}`);this.userInfo=t.data,console.log("用戶資料",this.userInfo)}catch(e){console.error("加載用戶信息時出錯:",e),console.error("錯誤回應:",e.response),console.error("請求細節:",e.config),alert("加載用戶信息失敗，請重試。")}},async loadOrders(){try{const e=this.user.id;if(console.log("用戶訂單ID：",e),!e)return void console.error("用戶ID無效");const t=await be.A.get("/api/orders",{params:{userId:e}});this.orders=t.data}catch(e){console.error("加載訂單時出錯：",e),alert("加載訂單失敗，請稍候再試")}},async loadRecipients(){try{const e=this.user.id,t=await be.A.get("/api/recipients",{params:{user_id:e}});this.recipients=t.data}catch(e){console.error("加載收件人時錯誤：",e),alert("加載收件人失敗，請稍候再試。")}},async saveRecipient(){try{const e=this.user.id;if(this.isEditing)await be.A.put(`/api/recipients/${this.editRecipient.id}`,{...this.editRecipient,user_id:e}),this.recipients[this.editingIndex]={...this.editRecipient};else{const t=await be.A.post("/api/recipients",{...this.editRecipient,user_id:e});this.recipients.push(t.data)}this.hideModal()}catch(e){console.error("保存收件人時出錯：",e),alert("保存收件人失敗，請稍候再試。")}},async deleteRecipient(e){try{const t=this.recipients[e].id;await be.A.delete(`/api/recipients/${t}`),this.recipients.splice(e,1)}catch(t){console.error("刪除收件人失敗",t),alert("刪除收件人失敗")}},toggleRecipient(){this.showRecipient=!this.showRecipient},addRecipient(){this.isEditing=!1,this.editRecipient={name:"",phone:"",address:""},this.showModal()},editRecipientInfo(e){this.isEditing=!0,this.editingIndex=e,this.editRecipient={...this.recipients[e]},this.showModal()},toggleOrderDetails(e){this.expandedOrder=this.expandedOrder===e?null:e},showModal(){if(this.$refs.recipientModal){const e=new V.aF(this.$refs.recipientModal);e.show()}},hideModal(){const e=V.aF.getInstance(this.$refs.recipientModal);e&&e.hide()},...(0,T.i0)("auth",["logout"]),async handleLogout(){await this.logout(),alert("已成功登出!"),this.$router.push("/UserLogin")},formateOrderDate(e){if(!e)return"";const t=new Date(e);return t.toLocaleString("zh-TW",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"})}}};const aa=(0,y.A)(ta,[["render",ea],["__scopeId","data-v-2427cf2c"]]);var sa=aa;function ra(e,t,a,s,o,n){return t[0]||(t[0]=(0,r.Fv)('<div class="faq-search" data-v-7a8228db><input type="text" class="form-control" id="faqSearch" placeholder="搜尋問題..." data-v-7a8228db></div><div class="accordion" id="faqAccordion" data-v-7a8228db><div class="accordion-item faq-item" data-v-7a8228db><h2 class="accordion-header" id="headingOne" data-v-7a8228db><button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne" data-v-7a8228db> 問題一：如何註冊？ </button></h2><div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#faqAccordion" data-v-7a8228db><div class="accordion-body" data-v-7a8228db> 您可以點擊右上角的「註冊」按鈕，並按照提示填寫相關資訊來完成註冊。 </div></div></div><div class="accordion-item faq-item" data-v-7a8228db><h2 class="accordion-header" id="headingTwo" data-v-7a8228db><button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo" data-v-7a8228db> 問題二：忘記密碼怎麼辦？ </button></h2><div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#faqAccordion" data-v-7a8228db><div class="accordion-body" data-v-7a8228db> 您可以點擊「忘記密碼」連結，輸入您的電子郵件，系統將發送密碼重置的指引給您。 </div></div></div></div><div class="contact-container contact" data-v-7a8228db><div class="contact-info" data-v-7a8228db><h4 data-v-7a8228db>或者透過以下表格聯絡</h4></div><div class="contact-form" data-v-7a8228db><form data-v-7a8228db><div class="mb-3" data-v-7a8228db><label for="name" class="form-label" data-v-7a8228db>姓名</label><input type="text" class="form-control" id="name" placeholder="請輸入您的姓名" data-v-7a8228db></div><div class="mb-3" data-v-7a8228db><label for="email" class="form-label" data-v-7a8228db>電子郵件</label><input type="email" class="form-control" id="email" placeholder="請輸入您的電子郵件" data-v-7a8228db></div><div class="mb-3" data-v-7a8228db><label for="message" class="form-label" data-v-7a8228db>留言</label><textarea class="form-control" id="message" rows="4" placeholder="請輸入您的訊息" data-v-7a8228db></textarea></div><button type="submit" class="btn btn-primary" data-v-7a8228db>送出</button></form></div></div>',3))}var oa={name:"ContactUs",mounted(){const e=document.getElementById("faqSearch");e&&e.addEventListener("input",(function(){const e=this.ariaValueMax.toLowerCase();document.querySelectorAll(".faq-item").forEach((function(t){const a=t.querySelector("according-button").innerText.toLowerCase(),s=t.querySelector(".according-body").innerText.toLowerCase();a.includes(e)||s.includes(e)?t.style.display="block":t.style.display="none"}))}))}};const na=(0,y.A)(oa,[["render",ra],["__scopeId","data-v-7a8228db"]]);var la=na;function ia(e,t,a,s,o,n){return(0,r.uX)(),(0,r.CE)("div",null,[t[0]||(t[0]=(0,r.Lk)("h1",null,"搜尋結果",-1)),(0,r.Lk)("p",null,"搜尋關鍵字："+(0,i.v_)(n.searchQuery),1)])}var da={name:"SearchResults",computed:{searchQuery(){return this.$route.query.q}}};const ca=(0,y.A)(da,[["render",ia]]);var ua=ca;const pa={class:"container register-container mt-5 whitespace:nowrap"},ma={class:"mb-3 d-flex align-items-center"},ha={class:"mb-3 d-flex align-items-center"},ba={class:"mb-3 d-flex align-items-center"},ga={class:"mb-3 d-flex align-items-center"},ka={class:"mb-3 d-flex align-items-center"},va={class:"mb-3 d-flex align-items-center"},fa={key:0,class:"text-danger"};function La(e,t,a,o,n,l){return(0,r.uX)(),(0,r.CE)("div",pa,[t[14]||(t[14]=(0,r.Lk)("h2",{class:"mb-4"},"會員註冊",-1)),(0,r.Lk)("form",{onSubmit:t[6]||(t[6]=(0,s.D$)(((...e)=>l.handleRegister&&l.handleRegister(...e)),["prevent"]))},[(0,r.Lk)("div",ma,[t[7]||(t[7]=(0,r.Lk)("label",{for:"username",class:"form-label me-2"},"會員姓名",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",class:"form-control",id:"username","onUpdate:modelValue":t[0]||(t[0]=e=>n.username=e),placeholder:"請輸入姓名",required:""},null,512),[[s.Jo,n.username]])]),(0,r.Lk)("div",ha,[t[8]||(t[8]=(0,r.Lk)("label",{for:"email",class:"form-label me-2"},"電子郵件",-1)),(0,r.bo)((0,r.Lk)("input",{type:"email",class:"form-control",id:"email","onUpdate:modelValue":t[1]||(t[1]=e=>n.email=e),placeholder:"請輸入電子信箱",required:""},null,512),[[s.Jo,n.email]])]),(0,r.Lk)("div",ba,[t[9]||(t[9]=(0,r.Lk)("label",{for:"phone",class:"form-label me-2"},"會員電話號碼",-1)),(0,r.bo)((0,r.Lk)("input",{type:"tel",class:"form-control",id:"phone","onUpdate:modelValue":t[2]||(t[2]=e=>n.phone=e),placeholder:"請輸入手機號碼",required:""},null,512),[[s.Jo,n.phone]])]),(0,r.Lk)("div",ga,[t[10]||(t[10]=(0,r.Lk)("label",{for:"address",class:"form-label me-2"},"收件人地址",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",class:"form-control",id:"address","onUpdate:modelValue":t[3]||(t[3]=e=>n.address=e),placeholder:"請輸入收件人地址",required:""},null,512),[[s.Jo,n.address]])]),(0,r.Lk)("div",ka,[t[11]||(t[11]=(0,r.Lk)("label",{for:"password",class:"form-label me-2"},"會員密碼",-1)),(0,r.bo)((0,r.Lk)("input",{type:"password",class:"form-control",id:"password","onUpdate:modelValue":t[4]||(t[4]=e=>n.password=e),placeholder:"請設定密碼"},null,512),[[s.Jo,n.password]])]),(0,r.Lk)("div",va,[t[12]||(t[12]=(0,r.Lk)("label",{for:"confirmpassword",class:"form-label me-2"},"請再次輸入密碼",-1)),(0,r.bo)((0,r.Lk)("input",{type:"password",class:"form-control",id:"confirmpassword","onUpdate:modelValue":t[5]||(t[5]=e=>n.confirmpassword=e),placeholder:"請再次輸入密碼",required:""},null,512),[[s.Jo,n.confirmpassword]]),n.password!==n.confirmpassword?((0,r.uX)(),(0,r.CE)("div",fa,"兩次密碼不相符，請重新輸入。")):(0,r.Q3)("",!0)]),t[13]||(t[13]=(0,r.Lk)("button",{type:"submit",class:"btn btn-primary"},"註冊",-1))],32)])}var ya={name:"UserRegister",data(){return{username:"",phone:"",address:"",email:"",password:"",confirmpassword:""}},methods:{handleRegister(){this.validatePhoneNumber()?this.password===this.confirmpassword?be.A.post("/api/users",{name:this.username,phone:this.phone,address:this.address,email:this.email,password:this.password,role:"user"}).then((()=>{alert("註冊成功"),this.$router.push("/UserLogin")})).catch((e=>{e.response?(console.error("伺服器錯誤:",e.response.data),alert("伺服器錯誤，請稍候再試。")):e.request?(console.error("未收到伺服器響應:",e.request),alert("無法連接到伺服器，請檢查網絡。")):(console.error("註冊失敗:",e.message),alert("註冊失敗，請稍候再試。"))})):alert("兩次密碼不相符，請重新輸入。"):alert("請輸入正確的手機號碼格式")},validatePhoneNumber(){const e=/^[0-9]{10}$/;return e.test(this.phone)}}};const Ca=(0,y.A)(ya,[["render",La],["__scopeId","data-v-66346fec"]]);var wa=Ca;const _a={class:"login-container container mt-5"},Fa={class:"mb-3"},Ia={class:"mb-3"},Pa={class:"d-flex justify-content-between mb-3"};function Ea(e,t,a,o,n,l){const i=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",_a,[t[8]||(t[8]=(0,r.Lk)("h2",{class:"text-center mb-4"},"會員登入",-1)),(0,r.Lk)("form",{onSubmit:t[2]||(t[2]=(0,s.D$)(((...e)=>l.handleLogin&&l.handleLogin(...e)),["prevent"]))},[(0,r.Lk)("div",Fa,[t[3]||(t[3]=(0,r.Lk)("label",{for:"email",class:"form-label"},"帳號/電子郵件",-1)),(0,r.bo)((0,r.Lk)("input",{type:"email",id:"email","onUpdate:modelValue":t[0]||(t[0]=e=>n.email=e),name:"email",class:"form-control",placeholder:"請輸入你的EMAIL",required:""},null,512),[[s.Jo,n.email]])]),(0,r.Lk)("div",Ia,[t[4]||(t[4]=(0,r.Lk)("label",{for:"password",class:"form-label"},"密碼",-1)),(0,r.bo)((0,r.Lk)("input",{type:"password",id:"password","onUpdate:modelValue":t[1]||(t[1]=e=>n.password=e),name:"password",class:"form-control",placeholder:"請輸入密碼",required:""},null,512),[[s.Jo,n.password]])]),(0,r.Lk)("div",Pa,[(0,r.bF)(i,{class:"text-decoration-none",to:"/ForgotPwd"},{default:(0,r.k6)((()=>t[5]||(t[5]=[(0,r.eW)("忘記密碼？")]))),_:1}),(0,r.bF)(i,{class:"text-decoration-none",to:"/UserRegister"},{default:(0,r.k6)((()=>t[6]||(t[6]=[(0,r.eW)("註冊新帳號")]))),_:1})]),t[7]||(t[7]=(0,r.Lk)("button",{type:"submit",class:"btn btn-primary w-100"},"登入",-1))],32)])}var Sa={name:"UserLogin",data(){return{email:"",password:""}},methods:{...(0,T.i0)("auth",["login"]),async handleLogin(){try{const e=await be.A.post("/api/users/login",{email:this.email,password:this.password}),t=e.data;if(console.log("用戶資料:",t),t){console.log("找到的用戶",t),alert("登入成功!歡迎"+t.name),this.login(t);const e=this.$route.query.redirect;"admin"===t.role?e&&e.startsWith("/admin")?this.$router.push(e):this.$router.push("/admin"):"user"===t.role?e&&!e.startsWith("/admin")?this.$router.push(e):this.$router.push("/MembersPage"):alert("帳號或密碼錯誤")}}catch(e){e.response?401===e.response.status||404===e.response.status?alert("帳號或密碼錯誤"):alert("登入失敗，伺服器錯誤！"):(console.error("登入失敗",e),alert("登入失敗，請稍候再試"))}}}};const Oa=(0,y.A)(Sa,[["render",Ea],["__scopeId","data-v-33f37b08"]]);var xa=Oa;const Aa={class:"container"},Ua={class:"mb-3"};function Ta(e,t,a,o,n,l){return(0,r.uX)(),(0,r.CE)("div",Aa,[t[4]||(t[4]=(0,r.Lk)("h5",null,"忘記密碼",-1)),(0,r.Lk)("form",{onSubmit:t[1]||(t[1]=(0,s.D$)(((...e)=>l.handleForgotPassword&&l.handleForgotPassword(...e)),["prevent"]))},[(0,r.Lk)("div",Ua,[t[2]||(t[2]=(0,r.Lk)("label",{for:"email",class:"form-label"},"電子郵件",-1)),(0,r.bo)((0,r.Lk)("input",{type:"email","onUpdate:modelValue":t[0]||(t[0]=e=>n.email=e),class:"form-control",id:"email",required:""},null,512),[[s.Jo,n.email]])]),t[3]||(t[3]=(0,r.Lk)("button",{type:"submit",class:"btn btn-primary"},"發送重設密碼連結信",-1))],32)])}var Ma={name:"ForgotPwd",data(){return{email:""}},methods:{async handleForgotPassword(){try{const e=this.$route.params.token;await be.A.post(`/api/reset-password/${e}`,{newPassword:this.newPassword}),alert("密碼已成功重新設置！"),this.$router.push("/login")}catch(e){console.error("重設密碼錯誤,error"),alert("重設密碼失敗")}}}};const Ra=(0,y.A)(Ma,[["render",Ta]]);var Da=Ra;const Xa={class:"order-confirmation container mt-5"};function Na(e,t,a,s,o,n){const l=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",Xa,[t[1]||(t[1]=(0,r.Lk)("h2",{class:"text-center mb-4"},"訂單確認",-1)),(0,r.Lk)("p",null,"感謝您的購買，您的訂單編號是："+(0,i.v_)(s.orderId),1),(0,r.bF)(l,{to:"/",class:"btn btn-primary mt-3"},{default:(0,r.k6)((()=>t[0]||(t[0]=[(0,r.eW)("繼續購物！")]))),_:1})])}var $a={name:"OrderConfirmation",setup(){const e=(0,W.lq)(),t=e.params.orderId,a=(0,Qe.KR)(null),s=async()=>{try{const e=await be.A.get(`/api/orders/${t}`);a.value=e.data}catch(e){console.error("获取订单详情时出错",e)}};return(0,r.sV)((()=>{s()})),{orderId:t,orderDetails:a}}};const qa=(0,y.A)($a,[["render",Na],["__scopeId","data-v-57c5191e"]]);var Va=qa;const Ka={class:"admin-dashboard container mt-5"},Wa={class:"button-container"},Ba={class:"button-item"},Qa={class:"button-item"},ja={class:"button-item"},Ja={class:"button-item"},za={class:"row text-center mt-4"},Ha={class:"col-md-6"},Ga={class:"col-md-6"},Za={class:"row text-center mt-4"},Ya={class:"col-md-6"},es={class:"col-md-6"},ts={class:"row mt-5"},as={class:"col-md-6"},ss={class:"col-md-6"};function rs(e,t,a,s,o,n){const l=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",Ka,[t[10]||(t[10]=(0,r.Lk)("h2",{class:"text-center"},"管理後台儀表板",-1)),(0,r.Lk)("div",Wa,[(0,r.Lk)("div",Ba,[(0,r.bF)(l,{to:"/admin/CarouselImages",class:"btn btn-primary btn-block"},{default:(0,r.k6)((()=>t[0]||(t[0]=[(0,r.eW)("輪播圖片管理")]))),_:1})]),(0,r.Lk)("div",Qa,[(0,r.bF)(l,{to:"/admin/products",class:"btn btn-primary btn-block"},{default:(0,r.k6)((()=>t[1]||(t[1]=[(0,r.eW)("商品管理")]))),_:1})]),(0,r.Lk)("div",ja,[(0,r.bF)(l,{to:"/admin/orders",class:"btn btn-primary btn-block"},{default:(0,r.k6)((()=>t[2]||(t[2]=[(0,r.eW)("訂單管理")]))),_:1})]),(0,r.Lk)("div",Ja,[(0,r.bF)(l,{to:"/admin/users",class:"btn btn-primary btn-block"},{default:(0,r.k6)((()=>t[3]||(t[3]=[(0,r.eW)("使用者管理")]))),_:1})])]),(0,r.Lk)("div",za,[(0,r.Lk)("div",Ha,[t[4]||(t[4]=(0,r.Lk)("h4",null,"今日訂單數量",-1)),(0,r.Lk)("p",null,(0,i.v_)(o.todayOrders),1)]),(0,r.Lk)("div",Ga,[t[5]||(t[5]=(0,r.Lk)("h4",null,"今日銷售金額",-1)),(0,r.Lk)("p",null,(0,i.v_)(n.formatNumber(o.todaySales)),1)])]),(0,r.Lk)("div",Za,[(0,r.Lk)("div",Ya,[t[6]||(t[6]=(0,r.Lk)("h4",null,"昨日銷售金額",-1)),(0,r.Lk)("p",null,(0,i.v_)(n.formatNumber(o.yesterdaySales)),1)]),(0,r.Lk)("div",es,[t[7]||(t[7]=(0,r.Lk)("h4",null,"過去七日銷售金額",-1)),(0,r.Lk)("p",null,(0,i.v_)(n.formatNumber(o.last7DaySales)),1)])]),t[11]||(t[11]=(0,r.Lk)("div",{class:"row mt-5"},[(0,r.Lk)("div",{class:"col-12"},[(0,r.Lk)("h4",null,"每日銷售趨勢圖"),(0,r.Lk)("canvas",{id:"salesChart"})])],-1)),(0,r.Lk)("div",ts,[(0,r.Lk)("div",as,[t[8]||(t[8]=(0,r.Lk)("h4",null,"今日註冊會員",-1)),(0,r.Lk)("p",null,(0,i.v_)(o.todayNewMembers),1)]),(0,r.Lk)("div",ss,[t[9]||(t[9]=(0,r.Lk)("h4",null,"累積會員數",-1)),(0,r.Lk)("p",null,(0,i.v_)(o.totalMembers),1)])])])}var os=a(2238),ns={name:"AdminDashboard",data(){return{todayOrders:0,todaySales:0,yesterdaySales:0,last7DaySales:0,salesData:[],lowStockProducts:[],todayNewMembers:0,totalMembers:0,carouselImages:[],products:[],sevenDaySalesRanking:[],monthSalesRanking:[]}},async mounted(){await this.loadDashboardData(),this.renderSalesChart()},methods:{async loadDashboardData(){try{const[e,t,a]=await Promise.all([be.A.get("/api/orders"),be.A.get("/api/users"),be.A.get("/api/products")]),s=e.data,r=t.data,o=a.data;this.products=o;const n=new Date,l=n.toISOString().split("T")[0];this.todayOrders=s.filter((e=>e.order_date.split("T")[0]===l)).length;const i=new Date;i.setDate(i.getDate()-1);const d=i.toISOString().split("T")[0],c=new Date;c.setDate(c.getDate()-7);const u=c.toISOString().split("T")[0];this.todaySales=s.filter((e=>e.order_date.split("T")[0]===l)).reduce(((e,t)=>e+Number(t.total)),0),this.yesterdaySales=s.filter((e=>e.order_date.split("T")[0]===d)).reduce(((e,t)=>e+Number(t.total)),0),this.last7DaySales=s.filter((e=>e.order_date.split("T")[0]>=u&&e.order_date.split("T")[0]<=l)).reduce(((e,t)=>e+Number(t.total)),0);const p={};s.forEach((e=>{const t=e.order_date.split("T")[0],a=Number(e.total);p[t]?p[t]+=a:p[t]=a})),this.salesData=Object.keys(p).map((e=>({date:e,amount:p[e]}))).sort(((e,t)=>new Date(e.date)-new Date(t.date)));const m=s.filter((e=>e.order_date>=u&&e.order_date<=n)),h={};m.forEach((e=>{e.items.forEach((e=>{h[e.product_id]?h[e.product_id].sales+=e.quantity:h[e.product_id]={name:e.product_name,sales:e.quantity}}))})),this.sevenDaySalesRanking=Object.values(h).sort(((e,t)=>t.sales-e.sales)).slice(0,10);const b=new Date;b.setDate(b.getDate()-30);const g=b.toISOString().split("T")[0],k=s.filter((e=>e.order_date>=g&&e.order_date<=n)),v={};k.forEach((e=>{e.items.forEach((e=>{v[e.product_id]?v[e.product_id].sales+=e.quantity:v[e.product_id]={name:e.product_name,sales:e.quantity}}))})),this.monthSalesRanking=Object.values(v).sort(((e,t)=>t.sales-e.sales)).slice(0,10);const f=r.filter((e=>{if(e.created_at){const t=new Date(e.created_at).toISOString().split("T")[0];return console.log("Members:",r),t===l}return!1})).length;this.todayNewMembers=f,this.totalMembers=r.length}catch(e){console.error(e),alert("加載儀表板數據時出錯，請稍候再試！")}},getProductStock(e){const t=this.products.find((t=>t.id===e));return t?t.stock:0},prepareSalesData(e){const t={};e.forEach((e=>{t[e.order_date]?t[e.order_date]+=e.total:t[e.order_date]=e.total}));const a=Object.keys(t).map((e=>({date:e,amount:t[e]}))).sort(((e,t)=>new Date(e.date)-new Date(t.date)));return a},renderSalesChart(){if(!this.salesData||0===this.salesData.length)return void console.error("銷售數據未加載！");const e=document.getElementById("salesChart").getContext("2d");new os.Ay(e,{type:"line",data:{labels:this.salesData.map((e=>e.date)),datasets:[{label:"銷售金額",data:this.salesData.map((e=>e.amount)),borderColor:"rgba(75,192,192,1)",borderWidth:2,fill:!1}]},options:{scales:{x:{title:{display:!0,text:"日期"}},y:{title:{display:!0,text:"銷售金額(元)"},beginAtZero:!0}}}})},deleteCarouselImage(e){confirm("確定要刪除這張圖片嗎？")&&be.A.delete(`/api/carousel-image/${e}`).then((()=>{this.carouselImages=this.carouselImages.filter((t=>t.id!==e)),alert("圖片已刪除。")})).catch((e=>{console.error("圖片刪除失敗",e),alert("圖片刪除失敗！請稍後再試。")}))},formatNumber(e){return Number(e).toLocaleString("zh-TW",{style:"currency",currency:"TWD",minimumFractionDigits:0,maximumFractionDigits:0,useGrouping:!1}).replace(/^0+/,"")}}};const ls=(0,y.A)(ns,[["render",rs],["__scopeId","data-v-173b647b"]]);var is=ls;const ds={class:"admin-dashboard container mt-5"},cs={class:"d-flex justify-content-end mb-3"},us={key:0,class:"accordion",id:"productAccordion"},ps={class:"accordion-item"},ms={class:"accordion-header",id:"headingProducts"},hs={class:"accordion-body"},bs={class:"d-flex justify-content-between align-items-center mb-3"},gs=["value"],ks=["disabled"],vs=["disabled"],fs={class:"table"},Ls=["onClick"],ys={class:"row mt-5"},Cs={class:"col-md-6"},ws={class:"accordion",id:"tagAccordion"},_s={class:"accordion-item"},Fs={class:"accordion-header",id:"headingTags"},Is={class:"accordion-body"},Ps={class:"d-flex justify-content-end mb-3"},Es={class:"table"},Ss=["onClick"],Os=["onClick"],xs={class:"col-md-6"},As={class:"accordion",id:"brandAccordion"},Us={class:"accordion-item"},Ts={class:"accordion-header",id:"headingBrands"},Ms={class:"accordion-body"},Rs={class:"d-flex justify-content-end mb-3"},Ds={class:"table"},Xs=["onClick"],Ns=["onClick"],$s={class:"modal fade",tabindex:"-1",ref:"tagModal"},qs={class:"modal-dialog"},Vs={class:"modal-content"},Ks={class:"modal-header"},Ws={class:"modal-body"},Bs={class:"modal-footer"},Qs={class:"modal fade",tabindex:"-1",ref:"brandModal"},js={class:"modal-dialog"},Js={class:"modal-content"},zs={class:"modal-header"},Hs={class:"modal-body"},Gs={class:"modal-footer"};function Zs(e,t,a,o,n,l){const d=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.Lk)("div",ds,[t[23]||(t[23]=(0,r.Lk)("h2",{class:"text-center"},"商品管理",-1)),(0,r.Lk)("div",cs,[(0,r.bF)(d,{to:"/admin/CreateProduct",class:"btn btn-success"},{default:(0,r.k6)((()=>t[16]||(t[16]=[(0,r.eW)("新增商品")]))),_:1}),(0,r.bF)(d,{to:"/admin/SpecialOffers",class:"btn btn-primary"},{default:(0,r.k6)((()=>t[17]||(t[17]=[(0,r.eW)("特價商品管理")]))),_:1})]),n.isSectionOpen.products?((0,r.uX)(),(0,r.CE)("div",us,[(0,r.Lk)("div",ps,[(0,r.Lk)("h2",ms,[(0,r.Lk)("button",{class:"accordion-button",type:"button",onClick:t[0]||(t[0]=e=>l.toggleSection("products"))}," 商品管理 ")]),(0,r.Lk)("div",{class:(0,i.C4)(["accordion-collapse collapse show",{show:n.isSectionOpen.products}]),"aria-labelledby":"headingProducts","data-bs-parent":"#productAccordion"},[(0,r.Lk)("div",hs,[(0,r.Lk)("div",bs,[(0,r.Lk)("div",null,[t[18]||(t[18]=(0,r.Lk)("label",{for:"itemsPerPage"},"每頁顯示：",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>n.itemsPerPage=e),id:"itemsPerPage"},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.itemsPerPageOptions,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e,value:e},(0,i.v_)(e),9,gs)))),128))],512),[[s.u1,n.itemsPerPage,void 0,{number:!0}]])]),(0,r.Lk)("div",null,[(0,r.Lk)("button",{class:"btn btn-primary btn-sm me-2",disabled:1===n.currentPage,onClick:t[2]||(t[2]=e=>n.currentPage--)},"上一頁 ",8,ks),(0,r.Lk)("span",null,"第 "+(0,i.v_)(n.currentPage)+" 頁，共 "+(0,i.v_)(l.totalPages)+" 頁",1),(0,r.Lk)("button",{class:"btn btn-primary btn-sm ms-2",disabled:n.currentPage===l.totalPages,onClick:t[3]||(t[3]=e=>n.currentPage++)},"下一頁 ",8,vs)])]),(0,r.Lk)("table",fs,[t[20]||(t[20]=(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",null,"商品名稱"),(0,r.Lk)("th",null,"價格"),(0,r.Lk)("th",null,"庫存"),(0,r.Lk)("th",null,"描述"),(0,r.Lk)("th",null,"操作")])],-1)),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.paginatedProducts,((e,a)=>((0,r.uX)(),(0,r.CE)("tr",{key:e.id},[(0,r.Lk)("td",null,(0,i.v_)(e.name),1),(0,r.Lk)("td",null,(0,i.v_)(e.price),1),(0,r.Lk)("td",null,(0,i.v_)(e.stock),1),(0,r.Lk)("td",null,(0,i.v_)(e.description),1),(0,r.Lk)("td",null,[(0,r.bF)(d,{to:{name:"EditProduct",params:{id:e.id}},class:"btn btn-warning btn-sm"},{default:(0,r.k6)((()=>t[19]||(t[19]=[(0,r.eW)("編輯")]))),_:2},1032,["to"]),(0,r.Lk)("button",{class:"btn btn-danger btn-sm ms-2",onClick:t=>l.deleteProduct(e.id,a)},"刪除",8,Ls)])])))),128))])])])],2)])])):(0,r.Q3)("",!0),(0,r.Lk)("div",ys,[(0,r.Lk)("div",Cs,[(0,r.Lk)("div",ws,[(0,r.Lk)("div",_s,[(0,r.Lk)("h2",Fs,[(0,r.Lk)("button",{class:"accordion-button",type:"button",onClick:t[4]||(t[4]=e=>l.toggleSection("tags"))}," 標籤管理 ")]),(0,r.Lk)("div",{class:(0,i.C4)(["accordion-collapse collapse",{show:n.isSectionOpen.tags}]),"aria-labelledby":"headingTags","data-bs-parent":"#tagAccordion"},[(0,r.Lk)("div",Is,[(0,r.Lk)("div",Ps,[(0,r.Lk)("button",{class:"btn btn-success",onClick:t[5]||(t[5]=(...e)=>l.openCreateTagModal&&l.openCreateTagModal(...e))},"新增標籤")]),(0,r.Lk)("table",Es,[t[21]||(t[21]=(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",null,"標籤名稱"),(0,r.Lk)("th",null,"操作")])],-1)),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.tags,((e,t)=>((0,r.uX)(),(0,r.CE)("tr",{key:e.id},[(0,r.Lk)("td",null,(0,i.v_)(e.name),1),(0,r.Lk)("td",null,[(0,r.Lk)("button",{class:"btn btn-warning btn-sm",onClick:e=>l.openEditTagModal(t)},"編輯",8,Ss),(0,r.Lk)("button",{class:"btn btn-danger btn-sm ml-2",onClick:a=>l.deleteTag(e.id,t)},"刪除",8,Os)])])))),128))])])])],2)])])]),(0,r.Lk)("div",xs,[(0,r.Lk)("div",As,[(0,r.Lk)("div",Us,[(0,r.Lk)("h2",Ts,[(0,r.Lk)("button",{class:"accordion-button",type:"button",onClick:t[6]||(t[6]=e=>l.toggleSection("brands"))}," 廠牌管理 ")]),(0,r.Lk)("div",{class:(0,i.C4)(["accordion-collapse collapse",{show:n.isSectionOpen.brands}]),"aria-labelledby":"headingBrands","data-bs-parent":"#brandAccordion"},[(0,r.Lk)("div",Ms,[(0,r.Lk)("div",Rs,[(0,r.Lk)("button",{class:"btn btn-success",onClick:t[7]||(t[7]=(...e)=>l.openCreateBrandModal&&l.openCreateBrandModal(...e))}," 新增廠牌 ")]),(0,r.Lk)("table",Ds,[t[22]||(t[22]=(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",null,"廠牌名稱"),(0,r.Lk)("th",null,"操作")])],-1)),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.brands,((e,t)=>((0,r.uX)(),(0,r.CE)("tr",{key:e.id},[(0,r.Lk)("td",null,(0,i.v_)(e.name),1),(0,r.Lk)("td",null,[(0,r.Lk)("button",{class:"btn btn-warning btn-sm",onClick:e=>l.openEditBrandModal(t)},"編輯",8,Xs),(0,r.Lk)("button",{class:"btn btn-danger btn-sm ml-2",onClick:a=>l.deleteBrand(e.id,t)},"刪除",8,Ns)])])))),128))])])])],2)])])])])]),(0,r.Lk)("div",$s,[(0,r.Lk)("div",qs,[(0,r.Lk)("div",Vs,[(0,r.Lk)("div",Ks,[t[24]||(t[24]=(0,r.Lk)("h5",{class:"modal-title"},"編輯標籤",-1)),(0,r.Lk)("button",{type:"button",class:"btn-close",onClick:t[8]||(t[8]=(...e)=>l.closeTagModal&&l.closeTagModal(...e))})]),(0,r.Lk)("div",Ws,[(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":t[9]||(t[9]=e=>n.tagForm.name=e),class:"form-control",placeholder:"標籤名稱"},null,512),[[s.Jo,n.tagForm.name]])]),(0,r.Lk)("div",Bs,[(0,r.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:t[10]||(t[10]=(...e)=>l.closeTagModal&&l.closeTagModal(...e))},"取消"),(0,r.Lk)("button",{type:"submit",class:"btn btn-primary",onClick:t[11]||(t[11]=(...e)=>l.saveTag&&l.saveTag(...e))},(0,i.v_)(n.isEditingTag?"保存變更":"新增標籤"),1)])])])],512),(0,r.Lk)("div",Qs,[(0,r.Lk)("div",js,[(0,r.Lk)("div",Js,[(0,r.Lk)("div",zs,[t[25]||(t[25]=(0,r.Lk)("h5",{class:"modal-title"},"編輯廠牌",-1)),(0,r.Lk)("button",{type:"button",class:"btn-close",onClick:t[12]||(t[12]=(...e)=>l.closeBrandModal&&l.closeBrandModal(...e))})]),(0,r.Lk)("div",Hs,[(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":t[13]||(t[13]=e=>n.brandForm.name=e),class:"form-control",placeholder:"廠牌名稱"},null,512),[[s.Jo,n.brandForm.name]])]),(0,r.Lk)("div",Gs,[(0,r.Lk)("button",{class:"btn btn-secondary",onClick:t[14]||(t[14]=(...e)=>l.closeBrandModal&&l.closeBrandModal(...e))},"取消"),(0,r.Lk)("button",{class:"btn btn-primary",onClick:t[15]||(t[15]=(...e)=>l.saveBrand&&l.saveBrand(...e))},"保存")])])])],512)],64)}var Ys={name:"AdminProducts",data(){return{products:[],tags:[],brands:[],productForm:{name:"",price:0,stock:0,description:"",brand_id:"",tag_ids:[]},tagForm:{name:""},brandForm:{name:""},isEditing:!1,currentIndex:null,isEditingTag:!1,isEditingBrand:!1,currentPage:1,itemsPerPage:10,itemsPerPageOptions:[10,20,50],isSectionOpen:{products:!0,tags:!1,brands:!1}}},mounted(){this.loadProducts(),this.loadTags(),this.loadBrands()},computed:{paginatedProducts(){const e=(this.currentPage-1)*this.itemsPerPage,t=e+this.itemsPerPage;return this.products.slice(e,t)},totalPages(){return Math.ceil(this.products.length/this.itemsPerPage)}},methods:{toggleSection(e){this.isSectionOpen[e]=!this.isSectionOpen[e]},async loadProducts(){try{const e=await be.A.get("/api/products");this.products=e.data,this.currentPage>this.totalPages&&(this.currentPage=this.totalPages||1)}catch(e){console.error("加載產品時出錯",e),alert("加載產品時出錯，請稍候再試！")}},async loadTags(){try{const e=await be.A.get("/api/tags");this.tags=e.data}catch(e){console.error("加載標籤時錯誤",e),alert("加載標籤時錯誤，請稍候再試！")}},async loadBrands(){try{const e=await be.A.get("/api/brands");this.brands=e.data}catch(e){console.error("加載廠牌時出錯",e),alert("加載廠牌時出錯，請稍候再試！")}},async saveTag(){try{if(this.isEditingTag)await be.A.put(`/api/tags/${this.tagForm.id}`,this.tagForm),this.tags[this.currentIndex]={...this.tagForm};else{const e=await be.A.post("/api/tags",this.tagForm);this.tags.push(e.data)}}catch(e){console.error("保存標籤時出錯！",e),alert("保存標籤時出錯，請稍候再試")}this.closeTagModal()},async saveBrand(){try{if(this.isEditingBrand)await be.A.put(`/api/brands/${this.brandForm.id}`,this.brandForm),this.brands[this.currentIndex]={...this.brandForm};else{const e=await be.A.post("/api/brands",this.brandForm);this.brands.push(e.data)}}catch(e){console.error("保存廠牌時出錯！",e),alert("保存廠牌時出錯，請稍候再試")}this.closeBrandModal()},async deleteProduct(e,t){if(confirm("確定要刪除此商品？"))try{await be.A.delete(`/api/products/${e}`),this.products.splice(t,1)}catch(a){console.error("刪除產品時出錯",a),alert("刪除產品時出錯，請稍候再試！")}},async deleteTag(e,t){if(confirm("確定要刪除此標籤？"))try{await be.A.delete(`/api/tags/${e}`),this.tags.splice(t,1)}catch(a){console.error("刪除標籤時出錯",a),alert("刪除標籤時出錯，請稍候再試！")}},async deleteBrand(e,t){if(confirm("確定要刪除此廠牌？"))try{await be.A.delete(`/api/brands/${e}`),this.brands.splice(t,1)}catch(a){console.error("刪除廠牌時出錯",a),alert("刪除廠牌時出錯，請稍候再試！")}},openCreateTagModal(){this.isEditingTag=!1,this.tagForm={name:""},this.$nextTick((()=>{const e=new V.aF(this.$refs.tagModal);e.show()}))},openCreateBrandModal(){this.isEditingBrand=!1,this.brandForm={name:""},this.$nextTick((()=>{const e=new V.aF(this.$refs.brandModal);e.show()}))},openEditTagModal(e){this.isEditingTag=!0,this.currentIndex=e,this.tagForm={...this.tags[e]};const t=new V.aF(this.$refs.tagModal);t.show()},openEditBrandModal(e){this.isEditingBrand=!0,this.currentIndex=e,this.brandForm={...this.brands[e]};const t=new V.aF(this.$refs.brandModal);t.show()},closeTagModal(){const e=V.aF.getInstance(this.$refs.tagModal);e&&e.hide()},closeBrandModal(){const e=V.aF.getInstance(this.$refs.brandModal);e&&e.hide()}},watch:{itemsPerPage(){this.currentPage=1}}};const er=(0,y.A)(Ys,[["render",Zs],["__scopeId","data-v-a8492868"]]);var tr=er;const ar={class:"admin-dashboard container mt-5"},sr={class:"admin-users container mt-5"},rr={class:"table table-hover"},or=["onClick"],nr=["onClick"],lr={key:0},ir={colspan:"4"},dr={class:"recipient-card"},cr=["onClick"],ur=["onClick"],pr={class:"modal fade",tabindex:"-1",ref:"userModal"},mr={class:"modal-dialog"},hr={class:"modal-content"},br={class:"modal-header"},gr={class:"modal-title"},kr={class:"modal-body"},vr={class:"mb-3"},fr={class:"mb-3"},Lr={class:"mb-3"},yr=["required"],Cr={class:"mb-3"},wr=["required"],_r={class:"mb-3"},Fr={key:0},Ir={class:"mb-3"},Pr=["required"],Er=["required"],Sr={class:"modal-footer"},Or={type:"submit",class:"btn btn-primary"};function xr(e,t,a,o,n,l){return(0,r.uX)(),(0,r.CE)("div",ar,[t[24]||(t[24]=(0,r.Lk)("h2",{class:"text-center"},"用戶管理",-1)),(0,r.Lk)("div",sr,[(0,r.Lk)("button",{class:"btn btn-success",onClick:t[0]||(t[0]=(...e)=>l.openCreateUserModal&&l.openCreateUserModal(...e))},"新增用戶")]),(0,r.Lk)("table",rr,[t[15]||(t[15]=(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",null,"用戶名"),(0,r.Lk)("th",null,"電子信箱"),(0,r.Lk)("th",null,"權限"),(0,r.Lk)("th",null,"操作")])],-1)),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.users,((a,s)=>((0,r.uX)(),(0,r.CE)(r.FK,{key:s},[(0,r.Lk)("tr",null,[(0,r.Lk)("td",null,(0,i.v_)(a.name),1),(0,r.Lk)("td",null,(0,i.v_)(a.email),1),(0,r.Lk)("td",null,(0,i.v_)(a.role),1),(0,r.Lk)("td",null,[(0,r.Lk)("button",{class:"btn btn-warning btn-sm",onClick:e=>l.openEditUserModal(s)},"編輯",8,or),(0,r.Lk)("button",{class:"btn btn-danger btn-sm ml-2",onClick:e=>l.deleteUser(s)},"刪除",8,nr)])]),a.recipients&&Array.isArray(a.recipients)?((0,r.uX)(),(0,r.CE)("tr",lr,[(0,r.Lk)("td",ir,[(0,r.Lk)("div",dr,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(a.recipients,((a,o)=>((0,r.uX)(),(0,r.CE)("div",{key:o},[t[11]||(t[11]=(0,r.Lk)("strong",null,"收件人名稱:",-1)),(0,r.eW)(" "+(0,i.v_)(a.name)+" ",1),t[12]||(t[12]=(0,r.Lk)("strong",null,"電話:",-1)),(0,r.eW)(" "+(0,i.v_)(a.phone)+" ",1),t[13]||(t[13]=(0,r.Lk)("strong",null,"地址:",-1)),(0,r.eW)(" "+(0,i.v_)(a.address)+" ",1),(0,r.Lk)("button",{class:"btn btn-sm btn-warning",onClick:t=>e.editRecipient(s,o)},"編輯收件人",8,cr),(0,r.Lk)("button",{class:"btn btn-sm btn-danger",onClick:t=>e.deleteRecipient(s,o)},"刪除",8,ur),t[14]||(t[14]=(0,r.Lk)("br",null,null,-1))])))),128))])])])):(0,r.Q3)("",!0)],64)))),128))])]),(0,r.Lk)("div",pr,[(0,r.Lk)("div",mr,[(0,r.Lk)("div",hr,[(0,r.Lk)("div",br,[(0,r.Lk)("h5",gr,(0,i.v_)(n.isEditing?"編輯用戶":"新增用戶"),1),(0,r.Lk)("button",{type:"button",class:"btn-close",onClick:t[1]||(t[1]=(...e)=>l.closeModal&&l.closeModal(...e))})]),(0,r.Lk)("div",kr,[(0,r.Lk)("form",{onSubmit:t[10]||(t[10]=(0,s.D$)(((...e)=>l.saveUser&&l.saveUser(...e)),["prevent"]))},[(0,r.Lk)("div",vr,[t[16]||(t[16]=(0,r.Lk)("label",{for:"userName",class:"form-label"},"用戶名",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",class:"form-control",id:"userName","onUpdate:modelValue":t[2]||(t[2]=e=>n.userForm.name=e),required:""},null,512),[[s.Jo,n.userForm.name]])]),(0,r.Lk)("div",fr,[t[17]||(t[17]=(0,r.Lk)("label",{for:"userEmail",class:"form-label"},"電子郵件",-1)),(0,r.bo)((0,r.Lk)("input",{type:"email",class:"form-control",id:"userEmail","onUpdate:modelValue":t[3]||(t[3]=e=>n.userForm.email=e),required:""},null,512),[[s.Jo,n.userForm.email]])]),(0,r.Lk)("div",Lr,[t[18]||(t[18]=(0,r.Lk)("label",{for:"userPassword",class:"form-label"},"密碼",-1)),(0,r.bo)((0,r.Lk)("input",{type:"password",class:"form-control",id:"userPassword","onUpdate:modelValue":t[4]||(t[4]=e=>n.userForm.password=e),required:!n.isEditing||n.userForm.password},null,8,yr),[[s.Jo,n.userForm.password]])]),(0,r.Lk)("div",Cr,[t[19]||(t[19]=(0,r.Lk)("label",{for:"confirmPassword",class:"form-label"},"確認密碼",-1)),(0,r.bo)((0,r.Lk)("input",{type:"password",class:"form-control",id:"confirmPassword","onUpdate:modelValue":t[5]||(t[5]=e=>n.userForm.confirmPassword=e),required:!n.isEditing||n.userForm.password},null,8,wr),[[s.Jo,n.userForm.confirmPassword]])]),(0,r.Lk)("div",_r,[t[21]||(t[21]=(0,r.Lk)("label",{for:"userName",class:"form-label"},"權限",-1)),(0,r.bo)((0,r.Lk)("select",{id:"userRole",class:"form-select","onUpdate:modelValue":t[6]||(t[6]=e=>n.userForm.role=e)},t[20]||(t[20]=[(0,r.Lk)("option",{value:"user"},"用戶",-1),(0,r.Lk)("option",{value:"admin"},"管理者",-1)]),512),[[s.u1,n.userForm.role]])]),"user"===n.userForm.role?((0,r.uX)(),(0,r.CE)("div",Fr,[(0,r.Lk)("div",Ir,[t[22]||(t[22]=(0,r.Lk)("label",{for:"userPhone",class:"form-label"},"電話",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",class:"form-control",id:"userPhone","onUpdate:modelValue":t[7]||(t[7]=e=>n.userForm.phone=e),required:"user"===n.userForm.role},null,8,Pr),[[s.Jo,n.userForm.phone]])]),(0,r.Lk)("div",null,[t[23]||(t[23]=(0,r.Lk)("label",{for:"userAddress",class:"form-label"},"地址",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",class:"form-control",id:"userAddress","onUpdate:modelValue":t[8]||(t[8]=e=>n.userForm.address=e),required:"user"===n.userForm.role},null,8,Er),[[s.Jo,n.userForm.address]])])])):(0,r.Q3)("",!0),(0,r.Lk)("div",Sr,[(0,r.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:t[9]||(t[9]=(...e)=>l.closeModal&&l.closeModal(...e))},"取消"),(0,r.Lk)("button",Or,(0,i.v_)(n.isEditing?"保存變更":"新增用戶"),1)])],32)])])])],512)])}var Ar={name:"AdminUsers",data(){return{users:[],userForm:{name:"",email:"",password:"",confirmPassword:"",role:"user",phone:"",address:""},isEditing:!1,currentIndex:null}},mounted(){this.loadUsers()},methods:{async loadUsers(){try{const e=await be.A.get("/api/users");this.users=e.data}catch(e){console.error("加載用戶資料失敗",e),alert("無法家載用戶資料")}},openCreateUserModal(){this.isEditing=!1,this.userForm={name:"",email:"",password:"",confirmPassword:"",role:"user",phone:"",address:""},this.$nextTick((()=>{const e=new V.aF(this.$refs.userModal);e.show()}))},openEditUserModal(e){this.isEditing=!0,this.currentIndex=e,this.userForm={...this.users[e]},this.userForm.password="",this.userForm.confirmPassword="";const t=new V.aF(this.$refs.userModal);t.show()},async saveUser(){try{if(this.userForm.password!==this.userForm.confirmPassword)return void alert("密碼和確認密碼不一致");if(this.isEditing){const e={name:this.userForm.name,email:this.userForm.email,role:this.userForm.role,phone:this.userForm.phone,address:this.userForm.address};this.userForm.password&&(e.password=this.userForm.password),await be.A.put(`/api/users/${this.userForm.id}`,e),this.users[this.currentIndex]={...this.userForm}}else{const e={name:this.userForm.name,email:this.userForm.email,role:this.userForm.role,phone:this.userForm.phone,address:this.userForm.address,password:this.userForm.password},t=await be.A.post("/api/users",e);this.users.push(t.data)}this.closeModal()}catch(e){console.error("更新用戶資料時錯誤！",e),alert("更新用戶資料失敗！")}},async deleteUser(e){if(confirm("確定要刪除此用戶嗎？"))try{await be.A.delete(`/api/users/${this.users[e].id}`),this.users.splice(e,1)}catch(t){alert("無法刪除用戶")}},closeModal(){this.$nextTick((()=>{const e=V.aF.getInstance(this.$refs.userModal);e&&e.hide()}))}}};const Ur=(0,y.A)(Ar,[["render",xr],["__scopeId","data-v-ef3d2a10"]]);var Tr=Ur;const Mr={class:"admin-dashboard container mt-5"},Rr={class:"filters d-flex justify-content-between mb-3"},Dr={class:"table table-hover"},Xr=["onClick"],Nr=["onClick","disabled","title"],$r={key:0},qr={class:"d-flex justify-content-center align-items-center"},Vr=["disabled"],Kr=["disabled"];function Wr(e,t,a,o,n,l){return(0,r.uX)(),(0,r.CE)("div",Mr,[t[8]||(t[8]=(0,r.Lk)("h2",{class:"text-center"},"訂單管理",-1)),(0,r.Lk)("div",Rr,[(0,r.bo)((0,r.Lk)("input",{type:"text",class:"form-control me-2",placeholder:"搜尋訂單號或用戶名","onUpdate:modelValue":t[0]||(t[0]=e=>n.searchQuery=e)},null,512),[[s.Jo,n.searchQuery]]),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>n.selectedStatus=e),class:"form-select me-2","aria-label":"訂單狀態篩選"},t[5]||(t[5]=[(0,r.Fv)('<option value="" data-v-41c61baa>全部狀態</option><option value="pending" data-v-41c61baa>待確認</option><option value="shipped" data-v-41c61baa>已發貨</option><option value="completed" data-v-41c61baa>已完成</option><option value="cancelled" data-v-41c61baa>已取消</option>',5)]),512),[[s.u1,n.selectedStatus]]),(0,r.Lk)("button",{class:"btn btn-primary",onClick:t[2]||(t[2]=(...e)=>l.filterOrders&&l.filterOrders(...e))},"篩選")]),(0,r.Lk)("table",Dr,[t[7]||(t[7]=(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",null,"訂單號"),(0,r.Lk)("th",null,"用戶編號"),(0,r.Lk)("th",null,"總金額"),(0,r.Lk)("th",null,"訂單狀態"),(0,r.Lk)("th",null,"建立日期"),(0,r.Lk)("th",null,"操作")])],-1)),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.paginatedOrders,(e=>((0,r.uX)(),(0,r.CE)("tr",{key:e.id},[(0,r.Lk)("td",null,(0,i.v_)(e.id),1),(0,r.Lk)("td",null,(0,i.v_)(e.user_id)+" - "+(0,i.v_)(l.getUserName(e.user_id)),1),(0,r.Lk)("td",null,(0,i.v_)(l.formatCurrency(e.total)),1),(0,r.Lk)("td",null,(0,i.v_)(l.formatStatus(e.status)),1),(0,r.Lk)("td",null,(0,i.v_)(l.formatDate(e.order_date)),1),(0,r.Lk)("td",null,[(0,r.Lk)("button",{class:"btn btn-info btn-sm me-2",onClick:t=>l.viewOrderDetails(e)},"查看",8,Xr),(0,r.Lk)("button",{class:"btn btn-danger btn-sm",onClick:t=>l.cancelOrder(e),disabled:"cancelled"===e.status||"completed"===e.status,title:"cancelled"===e.status||"completed"===e.status?"無法取消或已取消的訂單":"取消訂單"}," 取消訂單 ",8,Nr)])])))),128)),0===l.paginatedOrders.length?((0,r.uX)(),(0,r.CE)("tr",$r,t[6]||(t[6]=[(0,r.Lk)("td",{colspan:"6",class:"text-center"},"沒有符合條件的訂單。",-1)]))):(0,r.Q3)("",!0)])]),(0,r.Lk)("div",qr,[(0,r.Lk)("button",{class:"btn btn-outline-primary me-2",onClick:t[3]||(t[3]=(...e)=>l.prevPage&&l.prevPage(...e)),disabled:1===n.currentPage},"上一頁",8,Vr),(0,r.Lk)("span",null,(0,i.v_)(n.currentPage)+" / "+(0,i.v_)(l.totalPages)+"頁",1),(0,r.Lk)("button",{class:"btn btn-outline-primary ms-2",onClick:t[4]||(t[4]=(...e)=>l.nextPage&&l.nextPage(...e)),disabled:n.currentPage===l.totalPages},"下一頁",8,Kr)])])}var Br=a(2952),Qr=a.n(Br),jr={name:"AdminOrders",data(){return{orders:[],users:[],searchQuery:"",selectedStatus:"",currentPage:1,itemsPerPage:10,debouncedFilter:null}},computed:{filteredOrders(){return this.orders.filter((e=>{const t=e.userId&&e.userId.toString().toLowerCase().includes(this.searchQuery.toLowerCase())||e.id&&e.id.toString().toLowerCase().includes(this.searchQuery.toLowerCase()),a=!this.selectedStatus||e.status===this.selectedStatus;return t&&a}))},totalPages(){return Math.ceil(this.filteredOrders.length/this.itemsPerPage)||1},paginatedOrders(){const e=(this.currentPage-1)*this.itemsPerPage,t=this.currentPage*this.itemsPerPage;return this.filteredOrders.slice(e,t)}},methods:{async fetchOrders(){try{const e=await be.A.get("/api/orders");console.log("API回傳的訂單資料",e.data);const t=e.data;this.orders=t.map((e=>({...e,status:e.status||"pending"})))||[]}catch(e){console.error("加載訂單時出錯",e),alert("加載訂單時出錯"),this.orders=[]}},async fetchUsers(){try{const e=await be.A.get("/api/users");this.users=e.data||[]}catch(e){console.error("加載用戶時出錯",e),alert("加載用戶時出錯，請稍候再試！"),this.users=[]}},viewOrderDetails(e){console.log("查看訂單",e),this.$router.push({name:"OrderDetail",params:{id:e.id}})},async cancelOrder(e){if(confirm("確定要取消這個訂單？"))try{await be.A.put(`/api/orders/${e.id}/status`,{status:"cancelled"}),e.status="cancelled",alert("訂單已成功取消。")}catch(t){console.error("取消訂單時出錯",t),alert("取消訂單時出錯")}},prevPage(){this.currentPage>1&&this.currentPage--},nextPage(){this.currentPage<this.totalPages&&this.currentPage++},formatCurrency(e){return new Intl.NumberFormat("zh-TW",{style:"currency",currency:"TWD",minimumFractionDigits:0,maximumFractionDigits:0}).format(e)},formatStatus(e){const t={pending:"待確認",shipped:"已發貨",completed:"已完成",cancelled:"已取消"};return t[e]||"未知狀態"},formatDate(e){const t={year:"numeric",month:"2-digit",day:"2-digit"};return new Date(e).toLocaleDateString("zh-TW",t)},filterOrders(){this.currentPage=1},getUserName(e){const t=this.users.find((t=>t.id==e));return t?t.name:"未知用戶"}},mounted(){this.fetchOrders(),this.fetchUsers(),this.debouncedFilter=Qr()(this.filterOrders,300)},watch:{searchQuery(){this.debouncedFilter()},selectedStatus(){this.debouncedFilter()}}};const Jr=(0,y.A)(jr,[["render",Wr],["__scopeId","data-v-41c61baa"]]);var zr=Jr;const Hr={class:"container mt-5"},Gr={class:"mb-3"},Zr={class:"mb-3"},Yr={class:"mb-3"},eo={class:"mb-3"},to={class:"mb-3"},ao={key:0,class:"text-danger"},so={class:"mb-3"},ro={key:0,class:"text-danger"},oo={class:"mb-3"},no={key:0},lo=["src"];function io(e,t,a,o,n,l){const i=(0,r.g2)("Multiselect");return(0,r.uX)(),(0,r.CE)("div",Hr,[t[17]||(t[17]=(0,r.Lk)("h2",{class:"text-center mb-4"},"新增商品",-1)),(0,r.Lk)("form",{onSubmit:t[7]||(t[7]=(0,s.D$)(((...e)=>o.createProduct&&o.createProduct(...e)),["prevent"]))},[(0,r.Lk)("div",Gr,[t[8]||(t[8]=(0,r.Lk)("label",{for:"productName",class:"form-label"},"商品名稱",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>o.productForm.name=e),class:"form-control",required:""},null,512),[[s.Jo,o.productForm.name]])]),(0,r.Lk)("div",Zr,[t[9]||(t[9]=(0,r.Lk)("label",{for:"description",class:"form-label"},"商品描述",-1)),(0,r.bo)((0,r.Lk)("textarea",{"onUpdate:modelValue":t[1]||(t[1]=e=>o.productForm.description=e),class:"form-control",required:""},null,512),[[s.Jo,o.productForm.description]])]),(0,r.Lk)("div",Yr,[t[10]||(t[10]=(0,r.Lk)("label",{for:"price",class:"form-label"},"價格",-1)),(0,r.bo)((0,r.Lk)("input",{type:"number","onUpdate:modelValue":t[2]||(t[2]=e=>o.productForm.price=e),class:"form-control",required:""},null,512),[[s.Jo,o.productForm.price]])]),(0,r.Lk)("div",eo,[t[11]||(t[11]=(0,r.Lk)("label",{for:"stock",class:"form-label"},"庫存",-1)),(0,r.bo)((0,r.Lk)("input",{type:"number","onUpdate:modelValue":t[3]||(t[3]=e=>o.productForm.stock=e),class:"form-control",required:""},null,512),[[s.Jo,o.productForm.stock]])]),(0,r.Lk)("div",to,[t[12]||(t[12]=(0,r.Lk)("label",{for:"brand_id",class:"form-label"},"選擇品牌",-1)),(0,r.bF)(i,{modelValue:o.productForm.brand_id,"onUpdate:modelValue":t[4]||(t[4]=e=>o.productForm.brand_id=e),options:o.brands,searchable:!0,taggable:!0,label:"name",key:"id",valueProp:"id",placeholder:"搜尋或選擇品牌",onSelect:o.handleBrandSelect,onTag:o.createNewBrand},null,8,["modelValue","options","onSelect","onTag"]),!o.productForm.brand_id&&o.formSubmitted?((0,r.uX)(),(0,r.CE)("span",ao,"請選擇品牌")):(0,r.Q3)("",!0)]),(0,r.Lk)("div",so,[t[13]||(t[13]=(0,r.Lk)("label",{for:"tag_ids",class:"form-label"},"選擇標籤",-1)),(0,r.bF)(i,{modelValue:o.productForm.tag_ids,"onUpdate:modelValue":t[5]||(t[5]=e=>o.productForm.tag_ids=e),options:o.tags,searchable:!0,taggable:!0,label:"name",multiple:!0,key:"id",valueProp:"id",placeholder:"搜尋或選擇標籤",onSelect:o.handleTagSelect,onTag:o.createNewTag},null,8,["modelValue","options","onSelect","onTag"]),!o.productForm.tag_ids?.length&&o.formSubmitted?((0,r.uX)(),(0,r.CE)("span",ro,"請選擇至少一個標籤")):(0,r.Q3)("",!0)]),(0,r.Lk)("div",oo,[t[14]||(t[14]=(0,r.Lk)("label",{for:"productImage",class:"form-label"},"圖片上傳",-1)),(0,r.Lk)("input",{type:"file",class:"form-control",id:"productImage",onChange:t[6]||(t[6]=(...e)=>o.selectImage&&o.selectImage(...e)),accept:"image/*"},null,32)]),o.productForm.imagePreview?((0,r.uX)(),(0,r.CE)("div",no,[t[15]||(t[15]=(0,r.Lk)("h5",null,"圖片預覽",-1)),(0,r.Lk)("img",{src:o.productForm.imagePreview,alt:"商品圖片",style:{"max-width":"200px"}},null,8,lo)])):(0,r.Q3)("",!0),t[16]||(t[16]=(0,r.Lk)("button",{type:"submit",class:"btn btn-primary"},"新增商品",-1))],32)])}a(4603),a(7566),a(8721);var co=a(8074),uo={name:"CreateProduct",components:{Multiselect:co.Ay},setup(){const e=(0,W.rd)(),t=(0,Qe.Kh)({name:"",description:"",price:0,stock:0,brand_id:null,tag_ids:[],created_at:(new Date).toISOString().split("T")[0],imageFile:null,imagePreview:""}),a=()=>t.name.trim()?t.description.trim()?t.price<=0?(alert("價格必填且需大於 0"),!1):t.stock<=0?(alert("庫存必填且需大於 0"),!1):t.brand_id?!!t.tag_ids.length||(alert("請選擇至少一個標籤"),!1):(alert("請選擇品牌"),!1):(alert("商品描述必填"),!1):(alert("商品名稱必填"),!1),s=(0,Qe.KR)([]),o=(0,Qe.KR)([]),n=(0,Qe.KR)(!1),l=async()=>{try{const e=await be.A.get("/api/brands");s.value=e.data,console.log("加載的品牌資料:",s.value)}catch(e){console.error("讀取品牌資料時出錯:",e)}},i=async()=>{try{const e=await be.A.get("/api/tags");o.value=e.data,console.log("加載的標籤資料:",o.value)}catch(e){console.error("讀取標籤資料時出錯:",e)}},d=e=>{t.brand_id=e,console.log("選擇的品牌:",e)},c=e=>{Array.isArray(e)?t.tag_ids=e:t.tag_ids=[e].filter(Boolean),console.log("選擇的標籤",e)},u=async e=>{try{const a=await be.A.post("/api/brands",{name:e}),r=a.data;s.value.push(r),t.brand_id=r.id,alert("新品牌已添加")}catch(a){console.error("創建新品牌時出錯",a),alert("創建新品牌時出錯，請稍候再試")}},p=async e=>{try{const a=await be.A.post("/api/tags",{name:e}),s=a.data;o.value.push(s),t.tag_ids.push(s.id),alert("新標籤已增加")}catch(a){console.error("創建新標籤時出錯",a),alert("創建新標籤時出錯，請稍候再試。")}};(0,r.sV)((()=>{l(),i()}));const m=async()=>{if(n.value=!0,a())if(t.brand_id&&t.tag_ids&&0!==t.tag_ids.length)try{const a=new FormData;let s=[];Array.isArray(t.tag_ids)&&(s=t.tag_ids.map((e=>"object"===typeof e?e.id:e))),a.append("name",t.name),a.append("description",t.description),a.append("price",String(t.price)),a.append("stock",String(t.stock)),a.append("brand_id","object"===typeof t.brand_id?t.brand_id.id:t.brand_id),a.append("tag_ids",JSON.stringify(s)),a.append("created_at",t.created_at),t.imageFile&&a.append("image",t.imageFile);const r=await be.A.post("/api/products",a,{headers:{"Content-Type":"multipart/form-data"},timeout:1e4});console.log("伺服器回應：",r.data),alert("商品新增成功"),e.push("/admin/products")}catch(s){console.error("新增商品時出錯:",s);let e="新增商品失敗";"ERR_NETWORK"===s.code?e="無法連接到伺服器，請確認伺服器是否正常運行。":s.response?e=`伺服器錯誤: ${s.response.data?.message||s.message}`:s.request&&(e="未收到伺服器回應，請稍後再試。"),alert(e)}else alert("請選擇品牌和至少一個標籤")},h=e=>{const a=e.target.files[0];if(a){if(a.size>5242880)return alert("圖片大小不能超過5MB!"),void(e.target.value="");if(!a.type.startsWith("image/"))return alert("請上傳正確的圖片格式"),void(e.target.value="");t.imageFile=a,t.imagePreview=URL.createObjectURL(a)}};return{productForm:t,brands:s,tags:o,formSubmitted:n,createProduct:m,selectImage:h,handleBrandSelect:d,handleTagSelect:c,validateForm:a,createNewBrand:u,createNewTag:p}}};const po=(0,y.A)(uo,[["render",io],["__scopeId","data-v-cd4324ac"]]);var mo=po;const ho={class:"container mt-5"},bo={key:0,class:"text-center my-5"},go={key:0,class:"text-center mb-4"},ko=["src"],vo={class:"mb-3"},fo={class:"mb-3"},Lo={class:"input-group"},yo=["readonly"],Co={class:"mb-3"},wo={class:"input-group"},_o=["readonly"],Fo={class:"mb-3"},Io={class:"input-group"},Po=["readonly"],Eo={class:"mb-3"},So={class:"input-group"},Oo=["readonly"],xo={class:"mb-3"},Ao={class:"input-group"},Uo={class:"mb-3"},To={class:"input-group"},Mo={class:"custom-tag"},Ro=["onClick"];function Do(e,t,a,o,n,l){const d=(0,r.g2)("Multiselect");return(0,r.uX)(),(0,r.CE)("div",ho,[t[23]||(t[23]=(0,r.Lk)("h2",{class:"text-center"},"編輯產品資訊",-1)),o.isLoading?((0,r.uX)(),(0,r.CE)("div",bo,t[14]||(t[14]=[(0,r.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,r.Lk)("span",{class:"visually-hidden"},"載入中...")],-1)]))):(0,r.Q3)("",!0),o.isLoading?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("form",{key:1,onSubmit:t[13]||(t[13]=(0,s.D$)(((...e)=>o.updateProduct&&o.updateProduct(...e)),["prevent"]))},[o.productForm.imagePreview?((0,r.uX)(),(0,r.CE)("div",go,[(0,r.Lk)("img",{src:o.productForm.imagePreview,alt:"Product Image",class:"product-image"},null,8,ko)])):(0,r.Q3)("",!0),(0,r.Lk)("div",vo,[t[15]||(t[15]=(0,r.Lk)("label",{for:"productImage",class:"form-label"},"產品圖片",-1)),(0,r.Lk)("input",{type:"file",id:"productImage",class:"form-control",onChange:t[0]||(t[0]=(...e)=>o.selectImage&&o.selectImage(...e))},null,32)]),(0,r.Lk)("div",fo,[t[16]||(t[16]=(0,r.Lk)("label",{for:"productName",class:"form-label"},"商品名稱",-1)),(0,r.Lk)("div",Lo,[(0,r.bo)((0,r.Lk)("input",{type:"text",id:"productName",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=e=>o.productForm.name=e),readonly:!o.editableFields.name,required:""},null,8,yo),[[s.Jo,o.productForm.name]]),(0,r.Lk)("button",{type:"button",class:"btn btn-outline-secondary",onClick:t[2]||(t[2]=e=>o.toggleEdit("name"))},(0,i.v_)(o.editableFields.name?"完成":"修改"),1)])]),(0,r.Lk)("div",Co,[t[17]||(t[17]=(0,r.Lk)("label",{for:"productPrice",class:"form-label"},"價格",-1)),(0,r.Lk)("div",wo,[(0,r.bo)((0,r.Lk)("input",{type:"number",id:"productPrice",class:"form-control","onUpdate:modelValue":t[3]||(t[3]=e=>o.productForm.price=e),readonly:!o.editableFields.price,required:""},null,8,_o),[[s.Jo,o.productForm.price]]),(0,r.Lk)("button",{type:"button",class:"btn btn-outline-secondary",onClick:t[4]||(t[4]=e=>o.toggleEdit("price"))},(0,i.v_)(o.editableFields.price?"完成":"修改"),1)])]),(0,r.Lk)("div",Fo,[t[18]||(t[18]=(0,r.Lk)("label",{for:"productStock",class:"form-label"},"庫存",-1)),(0,r.Lk)("div",Io,[(0,r.bo)((0,r.Lk)("input",{type:"number",id:"productStock",class:"form-control","onUpdate:modelValue":t[5]||(t[5]=e=>o.productForm.stock=e),readonly:!o.editableFields.stock,required:""},null,8,Po),[[s.Jo,o.productForm.stock]]),(0,r.Lk)("button",{type:"button",class:"btn btn-outline-secondary",onClick:t[6]||(t[6]=e=>o.toggleEdit("stock"))},(0,i.v_)(o.editableFields.stock?"完成":"修改"),1)])]),(0,r.Lk)("div",Eo,[t[19]||(t[19]=(0,r.Lk)("label",{for:"productDescription",class:"form-label"},"描述",-1)),(0,r.Lk)("div",So,[(0,r.bo)((0,r.Lk)("textarea",{type:"number",id:"productDescription",class:"form-control","onUpdate:modelValue":t[7]||(t[7]=e=>o.productForm.description=e),readonly:!o.editableFields.description,required:""},null,8,Oo),[[s.Jo,o.productForm.description]]),(0,r.Lk)("button",{type:"button",class:"btn btn-outline-secondary",onClick:t[8]||(t[8]=e=>o.toggleEdit("description"))},(0,i.v_)(o.editableFields.description?"完成":"修改"),1)])]),(0,r.Lk)("div",xo,[t[20]||(t[20]=(0,r.Lk)("label",{for:"productBrand",class:"form-label"},"廠牌",-1)),(0,r.Lk)("div",Ao,[(0,r.bF)(d,{modelValue:o.productForm.brand_id,"onUpdate:modelValue":t[9]||(t[9]=e=>o.productForm.brand_id=e),options:o.brands,searchable:!0,label:"name","value-prop":"id",placeholder:"請選擇廠牌",disabled:!o.editableFields.brand_id,required:""},null,8,["modelValue","options","disabled"]),(0,r.Lk)("button",{type:"button",class:"btn btn-outline-secondary",onClick:t[10]||(t[10]=e=>o.toggleEdit("brand_id"))},(0,i.v_)(o.editableFields.brand_id?"完成":"修改"),1)])]),(0,r.Lk)("div",Uo,[t[21]||(t[21]=(0,r.Lk)("label",{for:"productTags",class:"form-label"},"標籤",-1)),(0,r.Lk)("div",To,[(0,r.bF)(d,{modelValue:o.productForm.tag_ids,"onUpdate:modelValue":t[11]||(t[11]=e=>o.productForm.tag_ids=e),options:o.tags,label:"name","value-prop":"id",placeholder:"請選擇標籤",disabled:!o.editableFields.tag_ids,required:"",multiple:""},{tag:(0,r.k6)((({option:e,remove:t})=>[(0,r.Lk)("span",Mo,[(0,r.eW)((0,i.v_)(e.name)+" ",1),(0,r.Lk)("button",{type:"button",onClick:a=>t(e)}," X ",8,Ro)])])),_:1},8,["modelValue","options","disabled"]),(0,r.Lk)("button",{type:"button",class:"btn btn-outline-secondary",onClick:t[12]||(t[12]=e=>o.toggleEdit("tag_ids"))},(0,i.v_)(o.editableFields.tag_ids?"完成":"修改"),1)])]),t[22]||(t[22]=(0,r.Lk)("button",{type:"submit",class:"btn btn-primary"},"更新產品",-1))],32))])}var Xo=a(4014),No={name:"EditProduct",components:{Multiselect:Xo.A},setup(){const e=(0,W.rd)(),t=(0,W.lq)(),a=t.params.id,s=(0,Qe.KR)(!0),o=(0,Qe.Kh)({name:!1,price:!1,stock:!1,description:!1,brand_id:!1,tag_ids:!1}),n=e=>{o[e]=!o[e]},l=(0,Qe.Kh)({name:"",description:"",price:0,stock:0,brand_id:null,tag_ids:[],imageFile:null,imagePreview:""}),i=(0,Qe.KR)([]),d=(0,Qe.KR)([]),c=async()=>{try{s.value=!0;const[e,t,r]=await Promise.all([be.A.get(`/api/products/${a}`),be.A.get("/api/brands"),be.A.get("/api/tags")]);i.value=t.data,d.value=r.data;const o=e.data;if(l.name=o.name,l.description=o.description,l.price=o.price,l.stock=o.stock,l.imagePreview=o.image?`/api/${o.image}`:"",o.brand_id){const e=i.value.find((e=>Number(e.id)===Number(o.brand_id)));l.brand_id=e?e.id:null}o.tag_ids&&Array.isArray(o.tag_ids)&&(l.tag_ids=o.tag_ids.map((e=>Number(e)))),console.log("成功讀取資料！",{product:o,selectedBrand:l.brand_id,selectedTags:l.tag_ids})}catch(e){console.error("加載商品訊息時出錯",e),alert("加載商品訊息時出錯，請稍後再試！")}finally{s.value=!1}},u=async()=>{try{const t=new FormData;t.append("name",l.name),t.append("description",l.description),t.append("price",l.price),t.append("stock",l.stock),t.append("brand_id",l.brand_id?.id),t.append("tag_ids",JSON.stringify(l.tag_ids.map((e=>e.id)))),l.imageFile&&t.append("image",l.imageFile),await be.A.put(`/api/products/${a}`,t,{headers:{"Content-Type":"multipart/form-data"}}),alert("更新商品成功！"),e.push("/products")}catch(t){console.error("更新商品時出錯:",t),alert("更新商品時出錯，請稍後再試！")}},p=e=>{const t=e.target.files[0];t&&(l.imageFile=t,l.imagePreview=URL.createObjectURL(t))};return(0,r.sV)((async()=>{await c()})),{productForm:l,brands:i,tags:d,isLoading:s,editableFields:o,toggleEdit:n,updateProduct:u,selectImage:p}}};const $o=(0,y.A)(No,[["render",Do]]);var qo=$o;function Vo(e,t,a,s,o,n){return(0,r.uX)(),(0,r.CE)("h5",null,"AdminContact")}var Ko={name:"AdminContact"};const Wo=(0,y.A)(Ko,[["render",Vo]]);var Bo=Wo;const Qo={class:"order-detail container mt-5"},jo={key:0},Jo={class:"order-info mb-4"},zo={class:"mb-3"},Ho={class:"table table-bordered"},Go={key:1};function Zo(e,t,a,o,n,l){return(0,r.uX)(),(0,r.CE)("div",Qo,[t[13]||(t[13]=(0,r.Lk)("h2",{class:"text-center"},"訂單詳情",-1)),n.order?((0,r.uX)(),(0,r.CE)("div",jo,[(0,r.Lk)("div",Jo,[(0,r.Lk)("p",null,[t[3]||(t[3]=(0,r.Lk)("strong",null,"訂單號：",-1)),(0,r.eW)((0,i.v_)(n.order.id),1)]),(0,r.Lk)("p",null,[t[4]||(t[4]=(0,r.Lk)("strong",null,"會員編號：",-1)),(0,r.eW)((0,i.v_)(n.order.user_id),1)]),(0,r.Lk)("p",null,[t[5]||(t[5]=(0,r.Lk)("strong",null,"用戶名：",-1)),(0,r.eW)((0,i.v_)(n.userName),1)]),(0,r.Lk)("p",null,[t[6]||(t[6]=(0,r.Lk)("strong",null,"建立日期：",-1)),(0,r.eW)((0,i.v_)(l.formatDate(n.order.orderDate)),1)]),(0,r.Lk)("p",null,[t[7]||(t[7]=(0,r.Lk)("strong",null,"總金額：",-1)),(0,r.eW)((0,i.v_)(l.formatCurrency(n.order.total)),1)]),(0,r.Lk)("div",zo,[t[9]||(t[9]=(0,r.Lk)("label",{for:"orderStatus",class:"form-label"},[(0,r.Lk)("strong",null,"訂單狀態：")],-1)),(0,r.bo)((0,r.Lk)("select",{id:"orderStatus","onUpdate:modelValue":t[0]||(t[0]=e=>n.order.status=e),class:"form-select",onChange:t[1]||(t[1]=(...e)=>l.updateOrderStatus&&l.updateOrderStatus(...e))},t[8]||(t[8]=[(0,r.Lk)("option",{value:"pending"},"待確認",-1),(0,r.Lk)("option",{value:"shipped"},"已發貨",-1),(0,r.Lk)("option",{value:"completed"},"已完成",-1),(0,r.Lk)("option",{value:"cancelled"},"已取消",-1)]),544),[[s.u1,n.order.status]])])]),t[11]||(t[11]=(0,r.Lk)("h4",null,"商品列表",-1)),(0,r.Lk)("table",Ho,[t[10]||(t[10]=(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",null,"商品名稱"),(0,r.Lk)("th",null,"數量"),(0,r.Lk)("th",null,"單價"),(0,r.Lk)("th",null,"小計")])],-1)),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.order.items,(e=>((0,r.uX)(),(0,r.CE)("tr",{key:e.productId},[(0,r.Lk)("td",null,(0,i.v_)(e.product_name),1),(0,r.Lk)("td",null,(0,i.v_)(e.quantity),1),(0,r.Lk)("td",null,(0,i.v_)(l.formatCurrency(e.price)),1),(0,r.Lk)("td",null,(0,i.v_)(l.formatCurrency(e.price*e.quantity)),1)])))),128))])]),(0,r.Lk)("button",{class:"btn btn-secondary mt-3",onClick:t[2]||(t[2]=(...e)=>l.goBack&&l.goBack(...e))},"返回")])):((0,r.uX)(),(0,r.CE)("div",Go,t[12]||(t[12]=[(0,r.Lk)("p",null,"正在加載訂單詳情...",-1)])))])}var Yo={name:"OrderDetail",props:["id"],data(){return{order:null,userName:""}},methods:{async fetchOrderDetails(e){try{const t=await be.A.get(`/api/orders/${e}`);this.order=t.data.order||t.data,this.fetchUserName(this.order.user_id)}catch(t){console.error("加載訂單詳情時出錯",t),alert("加載訂單詳情時出錯，請稍候再試！"),this.order=null}},async fetchUserName(e){try{const t=await be.A.get(`/api/users/${e}`),a=t.data.user||t.data;this.userName=a.name||"未知用戶"}catch(t){console.error("加載用戶資訊時出錯",t),this.userName="未知用戶"}},formatCurrency(e){return new Intl.NumberFormat("zh-TW",{style:"currency",currency:"TWD",minimumFractionDigits:0,maximumFractionDigits:0}).format(e)},formatDate(e){const t={year:"numeric",month:"2-digit",day:"2-digit"};return new Date(e).toLocaleDateString("zh-TW",t)},async updateOrderStatus(){if(this.order)try{await be.A.put(`/api/orders/${this.order.id}`,{status:this.order.status}),alert("訂單狀態已更新")}catch(e){console.error("更新訂單狀態時出錯",e),alert("更新訂單狀態時出錯，請稍候再試！")}},goBack(){this.$router.go(-1)}},mounted(){const e=this.id||this.$route.params.id;this.fetchOrderDetails(e)}};const en=(0,y.A)(Yo,[["render",Zo],["__scopeId","data-v-2181e1df"]]);var tn=en;const an={class:"carousel-management container mt-5"},sn={class:"carousel-image-list d-flex flex-wrap"},rn=["src"],on=["onClick"],nn={class:"me-2"},ln=["onClick"],dn={class:"upload-section mt-4"},cn={key:0,class:"preview-section mt-3"},un=["src"],pn={class:"mt-2"};function mn(e,t,a,s,o,n){return(0,r.uX)(),(0,r.CE)("div",an,[t[5]||(t[5]=(0,r.Lk)("h2",{class:"text-center"},"輪播圖片管理",-1)),(0,r.Lk)("div",sn,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(o.carouselImages,(e=>((0,r.uX)(),(0,r.CE)("div",{key:e.id,class:"carousel-image-item m-2"},[(0,r.Lk)("img",{src:n.getImageUrl(e.url),alt:"輪播圖片",class:"img-thumbnail"},null,8,rn),(0,r.Lk)("button",{class:"btn btn-danger btn-sm mt-2",onClick:t=>n.deleteCarouselImage(e.id)},"刪除圖片",8,on),(0,r.Lk)("div",nn,[(0,r.Lk)("button",{class:"btn btn-secondary btn-sm",onClick:t=>n.toggleImageVisibility(e)},(0,i.v_)(e.visible?"隱藏":"顯示"),9,ln)])])))),128))]),(0,r.Lk)("div",dn,[t[4]||(t[4]=(0,r.Lk)("h4",null," 上傳新圖片 ",-1)),(0,r.Lk)("input",{type:"file",onChange:t[0]||(t[0]=(...e)=>n.handleFileSelect&&n.handleFileSelect(...e)),accept:"image/*",ref:"fileInput"},null,544),o.previewUrl?((0,r.uX)(),(0,r.CE)("div",cn,[t[3]||(t[3]=(0,r.Lk)("h5",null,"預覽圖片",-1)),(0,r.Lk)("img",{src:o.previewUrl,alt:"上傳的圖片",class:"img-thumbnail",style:{"max-width":"300px"}},null,8,un),(0,r.Lk)("div",pn,[(0,r.Lk)("button",{class:"btn btn-primary me-2",onClick:t[1]||(t[1]=(...e)=>n.confirmUpload&&n.confirmUpload(...e))},"確認上傳"),(0,r.Lk)("button",{class:"btn btn-secondary",onClick:t[2]||(t[2]=(...e)=>n.cancelUpload&&n.cancelUpload(...e))},"取消上傳")])])):(0,r.Q3)("",!0)])])}var hn={name:"AdminCarouselImages",data(){return{carouselImages:[],selectedFile:null,previewUrl:""}},async mounted(){await this.loadCarouselImages()},methods:{async loadCarouselImages(){try{const e=await be.A.get("/api/carousel_images");this.carouselImages=e.data||[]}catch(e){console.error("加載輪播圖片失敗",e),alert("加載輪播圖片失敗！")}},handleFileSelect(e){const t=e.target.files[0];if(t){const e=["image/jpeg","image/png","image/gif"],a=5242880;if(!e.includes(t.type))return void alert("僅支援JPEG, PNG, GIF 格式的圖片！");if(t.size>a)return void alert("圖片超出5MB的上限！");this.selectedFile=t,this.previewUrl=URL.createObjectURL(t)}},async confirmUpload(){if(!this.selectedFile)return void alert("沒有選擇任何文件！");const e=new FormData;e.append("image",this.selectedFile);try{const t=await be.A.post("/api/carousel_images",e,{headers:{"Content-Type":"multipart/form-data"}});this.carouselImages.push(t.data),alert("圖片上傳成功"),this.resetUpload()}catch(t){console.error("圖片上傳失敗",t),alert("圖片上傳失敗!")}},cancelUpload(){this.resetUpload()},resetUpload(){this.selectedFile=null,this.previewUrl="",this.$refs.fileInput.value=""},async deleteCarouselImage(e){if(confirm("確定要刪除這張圖片嗎？"))try{await be.A.delete(`/api/carousel_images/${e}`),this.carouselImages=this.carouselImages.filter((t=>t.id!==e)),alert("圖片已刪除。")}catch(t){console.error("圖片刪除失敗",t),alert("圖片刪除失敗！請稍後再試。")}},async toggleImageVisibility(e){const t=!e.visible;try{await be.A.put(`/api/carousel_images/${e.id}`,{visible:t}),e.visible=t,alert(`圖片已${t?"顯示":"隱藏"}。`)}catch(a){console.error("更新圖片狀態失敗",a),alert("更新圖片狀態失敗！")}},getImageUrl(e){return`/api/${e}`}}};const bn=(0,y.A)(hn,[["render",mn],["__scopeId","data-v-dc35b1bc"]]);var gn=bn;const kn={class:"special-offers-dashboard container mt-5"},vn={class:"d-flex justify-content-end mb-3"},fn={class:"accordion",id:"specialOffersAccordion"},Ln={class:"accordion-item"},yn={id:"collapseSpecialOffers",class:"accordion-collapse collapse show","aria-labelledby":"headingSpecialOffers","data-bs-parent":"#specialOffersAccordion"},Cn={class:"accordion-body"},wn={class:"table"},_n=["onClick"],Fn=["onClick"],In={class:"modal fade",tabindex:"-1",ref:"specialOfferModal"},Pn={class:"modal-dialog"},En={class:"modal-content"},Sn={class:"modal-header"},On={class:"modal-title"},xn={class:"modal-body"},An={class:"mb-3"},Un={key:0,class:"list-group mt-2"},Tn=["onClick"],Mn={key:1,class:"mt-2"},Rn={class:"mb-3"},Dn={class:"mb-3"},Xn={class:"mb-3"},Nn={class:"modal-footer"};function $n(e,t,a,o,n,l){return(0,r.uX)(),(0,r.CE)("div",kn,[t[17]||(t[17]=(0,r.Lk)("h2",{class:"text-center"},"特價商品管理",-1)),(0,r.Lk)("div",vn,[(0,r.Lk)("button",{class:"btn btn-success",onClick:t[0]||(t[0]=(...e)=>l.openCreateSpecialOfferModal&&l.openCreateSpecialOfferModal(...e))},"新增特價商品")]),(0,r.Lk)("div",fn,[(0,r.Lk)("div",Ln,[t[11]||(t[11]=(0,r.Lk)("h2",{class:"accordion-header",id:"headingSpecialOffers"},[(0,r.Lk)("button",{class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseSpecialOffers","aria-expanded":"true","aria-controls":"collapseSpecialOffers"}," 特價商品管理 ")],-1)),(0,r.Lk)("div",yn,[(0,r.Lk)("div",Cn,[(0,r.Lk)("table",wn,[t[10]||(t[10]=(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",null,"商品名稱"),(0,r.Lk)("th",null,"特價價格"),(0,r.Lk)("th",null,"倒數時間 (秒)"),(0,r.Lk)("th",null,"創建日期"),(0,r.Lk)("th",null,"操作")])],-1)),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.specialOffers,((e,t)=>((0,r.uX)(),(0,r.CE)("tr",{key:e.id},[(0,r.Lk)("td",null,(0,i.v_)(l.getProductName(e.product_id)),1),(0,r.Lk)("td",null,(0,i.v_)(e.price),1),(0,r.Lk)("td",null,(0,i.v_)(e.countdown),1),(0,r.Lk)("td",null,(0,i.v_)(l.formatDate(e.created_at)),1),(0,r.Lk)("td",null,[(0,r.Lk)("button",{class:"btn btn-warning btn-sm me-2",onClick:e=>l.openEditSpecialOfferModal(t)},"編輯",8,_n),(0,r.Lk)("button",{class:"btn btn-danger btn-sm",onClick:a=>l.deleteSpecialOffer(e.id,t)},"刪除",8,Fn)])])))),128))])])])])])]),(0,r.Lk)("div",In,[(0,r.Lk)("div",Pn,[(0,r.Lk)("div",En,[(0,r.Lk)("div",Sn,[(0,r.Lk)("h5",On,(0,i.v_)(n.isEditing?"編輯特價商品":"新增特價商品"),1),(0,r.Lk)("button",{type:"button",class:"btn-close",onClick:t[1]||(t[1]=(...e)=>l.closeSpecialOfferModal&&l.closeSpecialOfferModal(...e))})]),(0,r.Lk)("div",xn,[(0,r.Lk)("div",An,[t[13]||(t[13]=(0,r.Lk)("label",{for:"productSelect",class:"form-label"},"搜尋商品名稱",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",id:"productSearch",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=e=>n.productSearchKeyword=e),onInput:t[3]||(t[3]=(...t)=>e.debouncedSearchProducts&&e.debouncedSearchProducts(...t)),required:""},null,544),[[s.Jo,n.productSearchKeyword]]),n.searchResults.length>0?((0,r.uX)(),(0,r.CE)("ul",Un,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.searchResults,(e=>((0,r.uX)(),(0,r.CE)("li",{class:"list-group-item list-group-item-action",key:e.id,onClick:t=>l.selectProduct(e)},(0,i.v_)(e.name),9,Tn)))),128))])):(0,r.Q3)("",!0),n.selectedProduct?((0,r.uX)(),(0,r.CE)("div",Mn,[t[12]||(t[12]=(0,r.Lk)("strong",null,"已選擇商品：",-1)),(0,r.eW)((0,i.v_)(n.selectedProduct.name)+" ",1),(0,r.Lk)("button",{type:"button",class:"btn btn-sm btn-outline-danger ms-2",onClick:t[4]||(t[4]=(...e)=>l.clearSelectedProduct&&l.clearSelectedProduct(...e))},"移除")])):(0,r.Q3)("",!0)]),(0,r.Lk)("div",Rn,[t[14]||(t[14]=(0,r.Lk)("label",{for:"priceInput",class:"form-label"},"特價價格",-1)),(0,r.bo)((0,r.Lk)("input",{type:"number",id:"priceInput","onUpdate:modelValue":t[5]||(t[5]=e=>n.specialOfferForm.price=e),class:"form-control",placeholder:"請輸入特價價格",required:""},null,512),[[s.Jo,n.specialOfferForm.price]])]),(0,r.Lk)("div",Dn,[t[15]||(t[15]=(0,r.Lk)("label",{for:"countdownInput",class:"form-label"},"倒數時間 (秒)",-1)),(0,r.bo)((0,r.Lk)("input",{type:"number",id:"countdownInput","onUpdate:modelValue":t[6]||(t[6]=e=>n.specialOfferForm.countdown=e),class:"form-control",placeholder:"請輸入倒數時間",required:""},null,512),[[s.Jo,n.specialOfferForm.countdown]])]),(0,r.Lk)("div",Xn,[t[16]||(t[16]=(0,r.Lk)("label",{for:"createdAtInput",class:"form-label"},"創建日期",-1)),(0,r.bo)((0,r.Lk)("input",{type:"date",id:"createdAtInput","onUpdate:modelValue":t[7]||(t[7]=e=>n.specialOfferForm.created_at=e),class:"form-control",required:""},null,512),[[s.Jo,n.specialOfferForm.created_at]])])]),(0,r.Lk)("div",Nn,[(0,r.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:t[8]||(t[8]=(...e)=>l.closeSpecialOfferModal&&l.closeSpecialOfferModal(...e))},"取消"),(0,r.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[9]||(t[9]=(...e)=>l.saveSpecialOffer&&l.saveSpecialOffer(...e))},(0,i.v_)(n.isEditing?"保存變更":"新增特價商品"),1)])])])],512)])}var qn={name:"SpecialOffers",data(){return{specialOffers:[],products:[],specialOfferForm:{id:null,product_id:"",price:0,countdown:0,created_at:""},isEditing:!1,currentIndex:null,productSearchKeyword:"",searchResults:[],selectedProduct:null}},mounted(){this.loadSpecialOffers(),this.loadProducts(),this.debouncedSearchProducts=Qr()(this.searchProducts,500)},methods:{async loadSpecialOffers(){try{const e=await be.A.get("/api/special-offers");this.specialOffers=e.data}catch(e){console.error("加載特價商品時出錯",e),alert("加載特價商品時出錯，請稍後再試！")}},async searchProducts(){if(""!==this.productSearchKeyword.trim())try{const e=await be.A.get("/api/products/search",{params:{keyword:this.productSearchKeyword,page:1,limit:10}});this.searchResults=e.data}catch(e){console.error("搜尋商品時出錯",e),alert("搜尋商品時出錯，請稍後再試！")}else this.searchResults=[]},selectProduct(e){this.selectedProduct=e,this.specialOfferForm.product_id=e.id,this.searchResults=[],this.productSearchKeyword=""},clearSelectedProduct(){this.selectedProduct=null,this.specialOfferForm.product_id=""},async loadProducts(){try{const e=await be.A.get("/api/products");this.products=e.data}catch(e){console.error("加載商品時出錯",e),alert("加載商品時出錯，請稍後再試！")}},formatDate(e){const t=new Date(e);return t.toLocaleDateString()},openCreateSpecialOfferModal(){this.isEditing=!1,this.specialOfferForm={id:null,product_id:"",price:0,countdown:0,created_at:""},this.selectedProduct=null,this.productSearchKeyword="",this.searchResults=[],this.$nextTick((()=>{const e=new V.aF(this.$refs.specialOfferModal);e.show()}))},async openEditSpecialOfferModal(e){this.isEditing=!0,this.currentIndex=e;const t={...this.specialOffers[e]};this.specialOfferForm=t;try{const e=await be.A.get(`/api/products/${t.product_id}`);this.selectedProduct=e.data}catch{console.error("取得商品資訊時出錯！"),alert("取得商品資訊時出錯，請稍後再試！")}this.productSearchKeyword="",this.searchResults=[],this.$nextTick((()=>{const e=new V.aF(this.$refs.specialOfferModal);e.show()}))},async getProductName(e){if(this.selectedProduct&&this.selectedProduct.id===e)return this.selectedProduct.name;try{const t=await be.A.get(`/api/products/${e}`);return t.data.name}catch(t){return console.error("取得商品名稱時出錯！"),alert("取得商品名稱時出錯，請稍候再試！"),"未知商品"}},closeSpecialOfferModal(){const e=V.aF.getInstance(this.$refs.specialOfferModal);e&&e.hide()},async saveSpecialOffer(){if(this.specialOfferForm.product_id&&this.specialOfferForm.price&&this.specialOfferForm.countdown&&this.specialOfferForm.created_at)try{if(this.isEditing)await be.A.put(`/api/special-offers/${this.specialOfferForm.id}`,this.specialOfferForm),this.specialOffers[this.currentIndex]={...this.specialOfferForm},alert("特價商品已更新！");else{const e=await be.A.post("/api/special-offers",this.specialOfferForm);this.specialOffers.push(e.data),alert("特價商品已新增！")}this.closeSpecialOfferModal()}catch(e){console.error("保存特價商品時出錯！",e),alert("保存特價商品時出錯，請稍後再試！")}else alert("請填寫所有必填欄位！")},async deleteSpecialOffer(e,t){if(confirm("確定要刪除此特價商品？"))try{await be.A.delete(`/api/special-offers/${e}`),this.specialOffers.splice(t,1),alert("特價商品已刪除！")}catch(a){console.error("刪除特價商品時出錯",a),alert("刪除特價商品時出錯，請稍後再試！")}}}};const Vn=(0,y.A)(qn,[["render",$n],["__scopeId","data-v-c82959e0"]]);var Kn=Vn;const Wn=[{path:"/",name:"HomePage",component:fe},{path:"/admin",name:"AdminDashBoard",component:is},{path:"/admin/Products",name:"AdminProducts",component:tr},{path:"/admin/Users",name:"AdminUsers",component:Tr},{path:"/admin/Orders",name:"AdminOrders",component:zr},{path:"/admin/Orders/:id(\\d+)",name:"OrderDetail",component:tn,props:!0},{path:"/admin/CreateProduct",name:"CreateProduct",component:mo},{path:"/admin/EditProduct/:id",name:"EditProduct",component:qo},{path:"/admin/AdminContact",name:"AdminContact",component:Bo},{path:"/admin/CarouselImages",name:"CarouselImages",component:gn},{path:"/admin/SpecialOffers",name:"SpecialOffers",component:Kn},{path:"/ShopCart",name:"ShopCart",component:Te,meta:{requiresAuth:!0}},{path:"/ProductsList",name:"ProductsList",component:rt},{path:"/MembersPage",name:"MembersPage",component:sa,meta:{requiresAuth:!0}},{path:"/AboutUsPage",name:"AboutUsPage",component:we},{path:"/ContactUs",name:"ContactUs",component:la},{path:"/SearchResults",name:"SearchResults",component:ua},{path:"/UserRegister",name:"UserRegister",component:wa},{path:"/UserLogin",name:"UserLogin",component:xa},{path:"/ForgotPwd",name:"ForgotPwd",component:Da},{path:"/ProductDetail/:id",name:"ProductDetail",component:Lt},{path:"/Order-Confirmation/:orderId",name:"OrderConfirmation",component:Va}],Bn=(0,W.aE)({history:(0,W.LA)(),routes:Wn});Bn.beforeEach(((e,t,a)=>{const s=!!localStorage.getItem("authToken"),r=localStorage.getItem("role");e.matched.some((e=>e.meta.requiresAuth))?s?e.meta.role&&e.meta.role!==r?(alert("你沒有權限進入此頁面"),a({path:"/"})):a():(alert("請先登入再使用！"),a({path:"/UserLogin"})):a()}));var Qn=Bn,jn={namespaced:!0,state:{items:[]},getters:{cartItems:e=>e.items,cartTotal:e=>e.items.reduce(((e,t)=>e+t.price*t.quantity),0),cartItemCount:e=>e.items.reduce(((e,t)=>e+t.quantity),0)},mutations:{addToCart(e,t){const a=Number(t.price);if(isNaN(a))return void console.error("Invalid price value");const s=e.items.find((e=>e.id===t.id));s?s.quantity++:e.items.push({id:t.id,name:t.name,price:a,image:t.image,quantity:1})},removeFromCart(e,t){e.items.splice(t,1)},updateCartItemQuantity(e,{index:t,quantity:a}){e.items[t].quantity=a<1?1:a},clearCart(e){e.items=[]}},actions:{addProductToCart({commit:e},t){t&&t.id?e("addToCart",t):console.error("Invalid product data")},removeItemFromCart({commit:e},t){e("removeFromCart",t)},updateItemQuantity({commit:e},t){e("updateCartItemQuantity",t)},clearShoppingCart({commit:e}){e("clearCart")}}},Jn=a(2741),zn={namespaced:!0,state:{isLoggedIn:!1,user:null,showLoginModal:!1},mutations:{login(e,t){e.isLoggedIn=!0,e.user=t},logout(e){e.isLoggedIn=!1,e.user=null},setShowLoginModal(e,t){e.showLoginModal=t}},actions:{login({commit:e},t){e("login",t),localStorage.setItem("user",JSON.stringify(t))},logout({commit:e}){e("logout"),localStorage.removeItem("user")},showLoginModal({commit:e},t){e("setShowLoginModal",t)}},getters:{isLoggedIn:e=>e.isLoggedIn,user:e=>e.user,showLoginModal:e=>e.showLoginModal}};const Hn={notifications:[]},Gn=3,Zn=2e3,Yn={ADD_NOTIFICATION(e,t){if(!t.message||!t.type)return void console.error("Invalid notification data");e.notifications.length>=Gn&&e.notifications.shift();const a=e.notifications.some((e=>e.message===t.message&&e.type===t.type));a||e.notifications.push(t)},REMOVE_NOTIFICATION(e,t){const a=e.notifications.findIndex((e=>e.id===t));-1!==a&&e.notifications.splice(a,1)}},el={showNotification({commit:e},{message:t,type:a,timeout:s=Zn}){if(!t||!a)return void console.error("Missing required notification parameters");const r=Date.now(),o={id:r,message:t,type:a};e("ADD_NOTIFICATION",o),s>0&&setTimeout((()=>{e("REMOVE_NOTIFICATION",r)}),s)},removeNotification({commit:e},t){e("REMOVE_NOTIFICATION",t)}};var tl={namespaced:!0,state:Hn,mutations:Yn,actions:el},al=(0,T.y$)({modules:{cart:jn,auth:zn,notifications:tl},plugins:[(0,Jn.A)()]});const sl=(0,s.Ef)($);be.A.defaults.baseURL="user@34.169.83.101:/var/www/html",sl.config.globalProperties.$axios=be.A,sl.use(Qn),sl.use(al),sl.use(q.A),sl.use(K.Ay),sl.mount("#app")}},t={};function a(s){var r=t[s];if(void 0!==r)return r.exports;var o=t[s]={exports:{}};return e[s].call(o.exports,o,o.exports,a),o.exports}a.m=e,function(){var e=[];a.O=function(t,s,r,o){if(!s){var n=1/0;for(c=0;c<e.length;c++){s=e[c][0],r=e[c][1],o=e[c][2];for(var l=!0,i=0;i<s.length;i++)(!1&o||n>=o)&&Object.keys(a.O).every((function(e){return a.O[e](s[i])}))?s.splice(i--,1):(l=!1,o<n&&(n=o));if(l){e.splice(c--,1);var d=r();void 0!==d&&(t=d)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[s,r,o]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,s){var r,o,n=s[0],l=s[1],i=s[2],d=0;if(n.some((function(t){return 0!==e[t]}))){for(r in l)a.o(l,r)&&(a.m[r]=l[r]);if(i)var c=i(a)}for(t&&t(s);d<n.length;d++)o=n[d],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(c)},s=self["webpackChunkeshop_site"]=self["webpackChunkeshop_site"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=a.O(void 0,[504],(function(){return a(5300)}));s=a.O(s)})();